<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 How login works | DevOps for Data Science (working title)</title>
  <meta name="description" content="A book on DevOps for data science and data scientists." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 How login works | DevOps for Data Science (working title)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book on DevOps for data science and data scientists." />
  <meta name="github-repo" content="akgold/dv4ds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 How login works | DevOps for Data Science (working title)" />
  
  <meta name="twitter:description" content="A book on DevOps for data science and data scientists." />
  

<meta name="author" content="Alex Gold" />


<meta name="date" content="2021-09-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ssh.html"/>
<link rel="next" href="choosing-and-using-a-data-architecture.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block/empty-anchor.js"></script>
<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DO4DS</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#moving-data-science-to-a-server"><i class="fa fa-check"></i><b>0.1</b> Moving Data Science to A Server</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software information and conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#components"><i class="fa fa-check"></i><b>1.1</b> Components</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="command-line.html"><a href="command-line.html"><i class="fa fa-check"></i><b>2</b> The Command Line</a></li>
<li class="chapter" data-level="3" data-path="computers-and-servers.html"><a href="computers-and-servers.html"><i class="fa fa-check"></i><b>3</b> Computers and Servers</a><ul>
<li class="chapter" data-level="3.1" data-path="computers-and-servers.html"><a href="computers-and-servers.html#computers-are-addition-factories"><i class="fa fa-check"></i><b>3.1</b> Computers are addition factories</a><ul>
<li class="chapter" data-level="3.1.1" data-path="computers-and-servers.html"><a href="computers-and-servers.html#compute"><i class="fa fa-check"></i><b>3.1.1</b> Compute</a></li>
<li class="chapter" data-level="3.1.2" data-path="computers-and-servers.html"><a href="computers-and-servers.html#memory-ram"><i class="fa fa-check"></i><b>3.1.2</b> Memory (RAM)</a></li>
<li class="chapter" data-level="3.1.3" data-path="computers-and-servers.html"><a href="computers-and-servers.html#storage-hard-drivedisk"><i class="fa fa-check"></i><b>3.1.3</b> Storage (Hard Drive/Disk)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="computers-and-servers.html"><a href="computers-and-servers.html#choosing-the-right-data-science-machine"><i class="fa fa-check"></i><b>3.2</b> Choosing the right data science machine</a><ul>
<li class="chapter" data-level="3.2.1" data-path="computers-and-servers.html"><a href="computers-and-servers.html#get-as-much-ram-as-feasible"><i class="fa fa-check"></i><b>3.2.1</b> Get as much RAM as feasible</a></li>
<li class="chapter" data-level="3.2.2" data-path="computers-and-servers.html"><a href="computers-and-servers.html#go-for-fewer-faster-cores-in-the-cpu"><i class="fa fa-check"></i><b>3.2.2</b> Go for fewer, faster cores in the CPU</a></li>
<li class="chapter" data-level="3.2.3" data-path="computers-and-servers.html"><a href="computers-and-servers.html#get-a-gpumaybe"><i class="fa fa-check"></i><b>3.2.3</b> Get a GPU…maybe…</a></li>
<li class="chapter" data-level="3.2.4" data-path="computers-and-servers.html"><a href="computers-and-servers.html#get-a-lot-of-storage-its-cheap"><i class="fa fa-check"></i><b>3.2.4</b> Get a lot of storage, it’s cheap</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="computers-and-servers.html"><a href="computers-and-servers.html#is-a-server-different"><i class="fa fa-check"></i><b>3.3</b> Is a server different?</a></li>
<li class="chapter" data-level="3.4" data-path="computers-and-servers.html"><a href="computers-and-servers.html#getting-a-server-of-your-own"><i class="fa fa-check"></i><b>3.4</b> Getting a server of your own</a><ul>
<li class="chapter" data-level="3.4.1" data-path="computers-and-servers.html"><a href="computers-and-servers.html#login-to-the-aws-console"><i class="fa fa-check"></i><b>3.4.1</b> Login to the AWS Console</a></li>
<li class="chapter" data-level="3.4.2" data-path="computers-and-servers.html"><a href="computers-and-servers.html#stand-up-an-instance"><i class="fa fa-check"></i><b>3.4.2</b> Stand up an instance</a></li>
<li class="chapter" data-level="3.4.3" data-path="computers-and-servers.html"><a href="computers-and-servers.html#ssh-into-the-server"><i class="fa fa-check"></i><b>3.4.3</b> SSH into the server</a></li>
<li class="chapter" data-level="3.4.4" data-path="computers-and-servers.html"><a href="computers-and-servers.html#doing-a-thing"><i class="fa fa-check"></i><b>3.4.4</b> Doing A Thing</a></li>
<li class="chapter" data-level="3.4.5" data-path="computers-and-servers.html"><a href="computers-and-servers.html#burn-it-all-down"><i class="fa fa-check"></i><b>3.4.5</b> Burn it all down</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="computers-and-servers.html"><a href="computers-and-servers.html#exercises"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="networking.html"><a href="networking.html"><i class="fa fa-check"></i><b>4</b> Networking and the Internet</a><ul>
<li class="chapter" data-level="4.1" data-path="networking.html"><a href="networking.html#tcpip-how-packets-find-their-way"><i class="fa fa-check"></i><b>4.1</b> TCP/IP: How packets find their way</a></li>
<li class="chapter" data-level="4.2" data-path="networking.html"><a href="networking.html#ports-the-last-mile"><i class="fa fa-check"></i><b>4.2</b> Ports: The last mile</a></li>
<li class="chapter" data-level="4.3" data-path="networking.html"><a href="networking.html#application-protocols-reading-the-mail"><i class="fa fa-check"></i><b>4.3</b> Application Protocols: Reading the mail</a><ul>
<li class="chapter" data-level="4.3.1" data-path="networking.html"><a href="networking.html#http-and-https"><i class="fa fa-check"></i><b>4.3.1</b> HTTP and HTTPs</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="networking.html"><a href="networking.html#networking-for-your-data-science-servers"><i class="fa fa-check"></i><b>4.4</b> Networking for your data science servers</a></li>
<li class="chapter" data-level="4.5" data-path="networking.html"><a href="networking.html#special-ip-addresses-and-ports"><i class="fa fa-check"></i><b>4.5</b> Special IP Addresses and Ports</a></li>
<li class="chapter" data-level="4.6" data-path="networking.html"><a href="networking.html#special-https-codes"><i class="fa fa-check"></i><b>4.6</b> Special HTTP(S) Codes</a></li>
<li class="chapter" data-level="4.7" data-path="networking.html"><a href="networking.html#exercises-1"><i class="fa fa-check"></i><b>4.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-cloud.html"><a href="the-cloud.html"><i class="fa fa-check"></i><b>5</b> The Cloud</a><ul>
<li class="chapter" data-level="5.1" data-path="the-cloud.html"><a href="the-cloud.html#the-rise-of-services"><i class="fa fa-check"></i><b>5.1</b> The Rise of Services</a></li>
<li class="chapter" data-level="5.2" data-path="the-cloud.html"><a href="the-cloud.html#common-services-that-will-be-helpful-to-know-offhand"><i class="fa fa-check"></i><b>5.2</b> Common Services That will be helpful to know offhand</a></li>
<li class="chapter" data-level="5.3" data-path="the-cloud.html"><a href="the-cloud.html#cloud-tooling"><i class="fa fa-check"></i><b>5.3</b> Cloud Tooling</a><ul>
<li class="chapter" data-level="5.3.1" data-path="the-cloud.html"><a href="the-cloud.html#iaas"><i class="fa fa-check"></i><b>5.3.1</b> IaaS</a></li>
<li class="chapter" data-level="5.3.2" data-path="the-cloud.html"><a href="the-cloud.html#not-iaas"><i class="fa fa-check"></i><b>5.3.2</b> Not IaaS</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="the-cloud.html"><a href="the-cloud.html#exercises-2"><i class="fa fa-check"></i><b>5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ssh.html"><a href="ssh.html"><i class="fa fa-check"></i><b>6</b> Accessing Servers via SSH</a><ul>
<li class="chapter" data-level="6.1" data-path="ssh.html"><a href="ssh.html#what-is-ssh"><i class="fa fa-check"></i><b>6.1</b> What is SSH?</a></li>
<li class="chapter" data-level="6.2" data-path="ssh.html"><a href="ssh.html#how-does-ssh-work"><i class="fa fa-check"></i><b>6.2</b> How does SSH work?</a></li>
<li class="chapter" data-level="6.3" data-path="ssh.html"><a href="ssh.html#basic-ssh-use"><i class="fa fa-check"></i><b>6.3</b> Basic SSH Use</a></li>
<li class="chapter" data-level="6.4" data-path="ssh.html"><a href="ssh.html#getting-comfortable-in-your-own-setup"><i class="fa fa-check"></i><b>6.4</b> Getting Comfortable in your own setup</a></li>
<li class="chapter" data-level="6.5" data-path="ssh.html"><a href="ssh.html#advanced-ssh-tips-tricks"><i class="fa fa-check"></i><b>6.5</b> Advanced SSH Tips + Tricks</a></li>
<li class="chapter" data-level="6.6" data-path="ssh.html"><a href="ssh.html#exercises-3"><i class="fa fa-check"></i><b>6.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="auth.html"><a href="auth.html"><i class="fa fa-check"></i><b>7</b> How login works</a><ul>
<li class="chapter" data-level="7.1" data-path="auth.html"><a href="auth.html#the-many-flavors-of-auth-or-what-does-sso-mean"><i class="fa fa-check"></i><b>7.1</b> The many flavors of auth (or what does SSO mean?)</a></li>
<li class="chapter" data-level="7.2" data-path="auth.html"><a href="auth.html#auth-techniques"><i class="fa fa-check"></i><b>7.2</b> Auth Techniques</a><ul>
<li class="chapter" data-level="7.2.1" data-path="auth.html"><a href="auth.html#you-get-a-permission-and-you-get-a-permission"><i class="fa fa-check"></i><b>7.2.1</b> You get a permission and you get a permission!</a></li>
<li class="chapter" data-level="7.2.2" data-path="auth.html"><a href="auth.html#authorization-is-kinda-hard"><i class="fa fa-check"></i><b>7.2.2</b> Authorization is kinda hard</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="auth.html"><a href="auth.html#auth-technologies"><i class="fa fa-check"></i><b>7.3</b> Auth Technologies</a><ul>
<li class="chapter" data-level="7.3.1" data-path="auth.html"><a href="auth.html#username-password"><i class="fa fa-check"></i><b>7.3.1</b> Username + Password</a></li>
<li class="chapter" data-level="7.3.2" data-path="auth.html"><a href="auth.html#pam"><i class="fa fa-check"></i><b>7.3.2</b> PAM</a></li>
<li class="chapter" data-level="7.3.3" data-path="auth.html"><a href="auth.html#ldapad"><i class="fa fa-check"></i><b>7.3.3</b> LDAP/AD</a></li>
<li class="chapter" data-level="7.3.4" data-path="auth.html"><a href="auth.html#kerberos-tickets"><i class="fa fa-check"></i><b>7.3.4</b> Kerberos Tickets</a></li>
<li class="chapter" data-level="7.3.5" data-path="auth.html"><a href="auth.html#saml"><i class="fa fa-check"></i><b>7.3.5</b> SAML</a></li>
<li class="chapter" data-level="7.3.6" data-path="auth.html"><a href="auth.html#oidcoauth2.0"><i class="fa fa-check"></i><b>7.3.6</b> OIDC/OAuth2.0</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="choosing-and-using-a-data-architecture.html"><a href="choosing-and-using-a-data-architecture.html"><i class="fa fa-check"></i><b>8</b> Choosing and Using A Data Architecture</a><ul>
<li class="chapter" data-level="8.1" data-path="choosing-and-using-a-data-architecture.html"><a href="choosing-and-using-a-data-architecture.html#options-for-data-storage"><i class="fa fa-check"></i><b>8.1</b> Options for Data Storage</a></li>
<li class="chapter" data-level="8.2" data-path="choosing-and-using-a-data-architecture.html"><a href="choosing-and-using-a-data-architecture.html#how-to-pick"><i class="fa fa-check"></i><b>8.2</b> How to pick</a></li>
<li class="chapter" data-level="8.3" data-path="choosing-and-using-a-data-architecture.html"><a href="choosing-and-using-a-data-architecture.html#working-with-file-systems"><i class="fa fa-check"></i><b>8.3</b> Working with File Systems</a></li>
<li class="chapter" data-level="8.4" data-path="choosing-and-using-a-data-architecture.html"><a href="choosing-and-using-a-data-architecture.html#database"><i class="fa fa-check"></i><b>8.4</b> Working with Databases</a><ul>
<li class="chapter" data-level="8.4.1" data-path="choosing-and-using-a-data-architecture.html"><a href="choosing-and-using-a-data-architecture.html#security"><i class="fa fa-check"></i><b>8.4.1</b> Security</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="choosing-and-using-a-data-architecture.html"><a href="choosing-and-using-a-data-architecture.html#exercises-4"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="environments-and-reproducibility.html"><a href="environments-and-reproducibility.html"><i class="fa fa-check"></i><b>9</b> Environments and Reproducibility</a></li>
<li class="chapter" data-level="10" data-path="it-and-data-science-workflows.html"><a href="it-and-data-science-workflows.html"><i class="fa fa-check"></i><b>10</b> IT and Data Science Workflows</a><ul>
<li class="chapter" data-level="10.1" data-path="it-and-data-science-workflows.html"><a href="it-and-data-science-workflows.html#devtestprod"><i class="fa fa-check"></i><b>10.1</b> Dev/Test/Prod</a></li>
<li class="chapter" data-level="10.2" data-path="it-and-data-science-workflows.html"><a href="it-and-data-science-workflows.html#cattle-not-pets"><i class="fa fa-check"></i><b>10.2</b> Cattle, Not Pets</a></li>
<li class="chapter" data-level="10.3" data-path="it-and-data-science-workflows.html"><a href="it-and-data-science-workflows.html#how-does-stuff-actually-get-deployed"><i class="fa fa-check"></i><b>10.3</b> How Does Stuff Actually Get Deployed</a></li>
<li class="chapter" data-level="10.4" data-path="it-and-data-science-workflows.html"><a href="it-and-data-science-workflows.html#exercises-5"><i class="fa fa-check"></i><b>10.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="scaling.html"><a href="scaling.html"><i class="fa fa-check"></i><b>11</b> Scaling</a><ul>
<li class="chapter" data-level="11.1" data-path="scaling.html"><a href="scaling.html#types-of-scaling"><i class="fa fa-check"></i><b>11.1</b> Types of Scaling</a></li>
<li class="chapter" data-level="11.2" data-path="scaling.html"><a href="scaling.html#load-balancing-configurations"><i class="fa fa-check"></i><b>11.2</b> Load-Balancing configurations</a></li>
<li class="chapter" data-level="11.3" data-path="scaling.html"><a href="scaling.html#adding-servers-in-real-time"><i class="fa fa-check"></i><b>11.3</b> Adding servers in real time</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="docker.html"><a href="docker.html"><i class="fa fa-check"></i><b>12</b> Docker</a><ul>
<li class="chapter" data-level="12.1" data-path="docker.html"><a href="docker.html#container-orchestration"><i class="fa fa-check"></i><b>12.1</b> Container Orchestration</a></li>
<li class="chapter" data-level="12.2" data-path="docker.html"><a href="docker.html#exercises-6"><i class="fa fa-check"></i><b>12.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="offline.html"><a href="offline.html"><i class="fa fa-check"></i><b>13</b> Offline</a></li>
<li class="chapter" data-level="14" data-path="things-to-add-additional-topics.html"><a href="things-to-add-additional-topics.html"><i class="fa fa-check"></i><b>14</b> Things To Add (Additional Topics)</a></li>
<li class="chapter" data-level="15" data-path="determining-what-you-need.html"><a href="determining-what-you-need.html"><i class="fa fa-check"></i><b>15</b> Determining What You Need</a></li>
<li class="chapter" data-level="16" data-path="getting-started-with-terminal.html"><a href="getting-started-with-terminal.html"><i class="fa fa-check"></i><b>16</b> Getting Started with Terminal</a></li>
<li class="chapter" data-level="17" data-path="useful-shell-commands.html"><a href="useful-shell-commands.html"><i class="fa fa-check"></i><b>17</b> Useful Shell Commands</a><ul>
<li class="chapter" data-level="17.1" data-path="useful-shell-commands.html"><a href="useful-shell-commands.html#miscellaneous-symbols"><i class="fa fa-check"></i><b>17.1</b> Miscellaneous Symbols</a></li>
<li class="chapter" data-level="17.2" data-path="useful-shell-commands.html"><a href="useful-shell-commands.html#moving-yourself-and-your-files"><i class="fa fa-check"></i><b>17.2</b> Moving yourself and your files</a></li>
<li class="chapter" data-level="17.3" data-path="useful-shell-commands.html"><a href="useful-shell-commands.html#checking-out-files"><i class="fa fa-check"></i><b>17.3</b> Checking out Files</a></li>
<li class="chapter" data-level="17.4" data-path="useful-shell-commands.html"><a href="useful-shell-commands.html#checking-out-server-activity"><i class="fa fa-check"></i><b>17.4</b> Checking out Server Activity</a></li>
<li class="chapter" data-level="17.5" data-path="useful-shell-commands.html"><a href="useful-shell-commands.html#checking-out-networking"><i class="fa fa-check"></i><b>17.5</b> Checking out Networking</a></li>
<li class="chapter" data-level="17.6" data-path="useful-shell-commands.html"><a href="useful-shell-commands.html#user-management"><i class="fa fa-check"></i><b>17.6</b> User Management</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="more-to-say.html"><a href="more-to-say.html"><i class="fa fa-check"></i><b>A</b> More to Say</a><ul>
<li class="chapter" data-level="A.1" data-path="more-to-say.html"><a href="more-to-say.html#an-aside-on-open-source"><i class="fa fa-check"></i><b>A.1</b> An aside on open source</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DevOps for Data Science (working title)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="auth" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> How login works</h1>
<ul>
<li><p>You do auth all the time</p></li>
<li><p>Private auth – login to your bank with a unique username and pw</p></li>
<li><p>MFA (2FA) – get a text message or use an authenticator token</p>
<ul>
<li>Or yubikey, etc</li>
</ul></li>
<li><p>Public auth – you might login to spotify using your facebook,
apple, or google credentials</p>
<ul>
<li>Spotify is a Service Provider and the other side an Identity
Provider</li>
</ul></li>
</ul>
<p>For the most part, this chapter is designed to help you talk to the
folks who manage auth at your organization. Unless you’ve got a small
organization with only a few data scientists, you probably won’t have to
manage this yourself. But it can be extremely helpful to understand how
auth works when you’re trying to ask for something from the
organization’s admins.</p>
<p>In order to talk concretely about logging into systems, it’s helpful to
clarify some terms. For the most part, these terms are industry
standard, but I’m also going to generalize some terms because they’re
used for certain types of auth, and they’re really useful.</p>
<p>For the purposes of this document, we’re going to be talking about
trying to login to a <strong>service</strong>. A service is something you want to
login to – it could be your phone or your email, or a server, a
database, or software like RStudio Server or JupyterHub.</p>
<p>When you go to login to a service, there are two things that have to
happen. First, you have to assert and verify who you are. This process
is called <strong>authentication</strong>, and the assertion and proof of identity
are your <strong>credentials</strong> or <strong>creds</strong>. The most common credentials are a
username and password, but there are other options including SSH keys,
multi-factor authentication, or biometrics.</p>
<p>Once you’ve proven who you are, then the system needs to determine what
you’re supposed to have access to. This process is called
<strong>authorization.</strong></p>
<p>Often, the authentication + authorization process is referred to
collectively as <strong>auth</strong>.</p>
<p>[#TODO: Image of Auth</p>
<ol style="list-style-type: decimal">
<li>Make the user provide creds (username/password)</li>
<li>System checks credentials against store</li>
<li>(For SSO) Check if user is allowed to access resource</li>
<li>Send back <em>something</em></li>
<li>User is authorized]</li>
</ol>
<p>So, to summarize when you go to login to a service, the service reaches
out to some sort of system to verify your identity. Depending on the
method, it may also check your authorization. The name of that system
varies by the auth method, but for the purposes of this chapter, we’ll
refer to it generally as the identity store. Depending on the auth
method, the identity store may store just authentication records, or
both authentication and authorization.</p>
<div id="the-many-flavors-of-auth-or-what-does-sso-mean" class="section level2">
<h2><span class="header-section-number">7.1</span> The many flavors of auth (or what does SSO mean?)</h2>
<p>Single Sign On (SSO) is a slippery term, so it is almost always
necessary to clarify what is meant by the term when you hear it. At some
organizations, identity management isn’t centralized at all. This means
that usernames and passwords are unique to each service, onboarding and
offboarding of users has to be handled independently for each service,
and users have to login frequently. In short, it’s often not a great
system. This is never referred to as SSO.</p>
<p><img src="images/206-auth/sso.jpeg" width="479" /></p>
<p>Most organizations of a meaningful size have centralized identity
management. This means that identities, credentials, authorization,
onboarding, and offboarding are handled centrally. However, you may
still need to independently login to each system. For example, in this
system, every service might take the same username and password as your
credentials, but if you go to RStudio Server followed by JupyterHub,
you’ll need to provide that username and password independently to each
service. This system is often facilitated by PAM, and LDAP/AD. Some
organizations call this SSO, because there’s only one set of
credentials.</p>
<p>In true SSO, users login once and are given a token or
ticket.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> Then, when they go to the next service, they
don’t have to login again because that service can just look at the
token or ticket to do auth for that user. For example, in this system, I
could go to RStudio Server and login, and then go to JupyterHub and get
in without being prompted again for my password. This type of auth is
facilitated by Kerberos, SAML, or OAuth.</p>
</div>
<div id="auth-techniques" class="section level2">
<h2><span class="header-section-number">7.2</span> Auth Techniques</h2>
<p>If you have five data scientists in your group, and the only shared
resource you have is an RStudio Server instance, you probably don’t need
to think terribly hard about auth. It’s pretty straightforward to just
make users on a server and give them access to everything.</p>
<p>But as organizations get larger with hundreds or thousands of users,
there’s constant churn of people joining and leaving. The number of
services can creep into the dozens or hundreds and people may have very
different authorization levels to different services. Trying to manage
auth on the individual services is a nightmare – as is trying to keep
that many usernames and passwords straight for users. That is why almost
all organizations with more than a few users have centrally managed
auth.</p>
<div id="you-get-a-permission-and-you-get-a-permission" class="section level3">
<h3><span class="header-section-number">7.2.1</span> You get a permission and you get a permission!</h3>
<p>For the most part, we think of people being authenticated and authorized
into services. However, it’s sometimes useful to consider the broader
class of entities that could do auth. There are two common non-human
entities that are included in auth systems that are worth considering.</p>
<p><strong>Service Accounts</strong> are accounts given to non-human entities when you
want it to be able to do something on its own behalf. For example, maybe
you’ve got a Shiny app that users use to visualize data that’s in a
database. Very often, you don’t want the app to have the same permisions
as the app’s author, or to inherit the permissions of the people viewing
the app. Instead, you want the app to be able to have permissions to do
certain database operations. In that case, you would create a service
account to give to the Shiny app that has exactly those permissions.</p>
<p>There are also times where it’s useful to go one level up and give
permissions to an entire instance or service. In that case, you might
assign permissions to an instance. For example, you could make it the
case that anyone who is logged into the JupyterHub server is allowed to
read from the database.</p>
<p>Instance permissions are rather broad, and so they are usually only
applied when you’ve got multiple resources inside a private network. In
that case, authentication and authorization are only done at a single
point and authorization is pretty broad.</p>
</div>
<div id="authorization-is-kinda-hard" class="section level3">
<h3><span class="header-section-number">7.2.2</span> Authorization is kinda hard</h3>
<p>From a management perspective, authentication is pretty simple. A person
is given a set of credentials, and they have to supply those credentials
when prompted to prove they are who they say they are.</p>
<p>Authorization is a whole other can of worms. There is a meaningful
literature on varieties of authorization and how they work. We’re not
going to get too deep into the weeds, other than to define some common
terms and how they’re used.</p>
<p>The atomic basis for authorization is a <strong>permission</strong>. Permissions are
a binary switch that answers the question <em>is this person allowed to do
the thing they are trying to do?</em><a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<p>The simplest way of assigning permissions is called an <strong>access control
list</strong> (ACL). In systems that use ACLs, each piece of content has a list
of users who are allowed access. Sometimes, ACLs are also assigned to
groups, which are simply sets of users – think <code>data-scientists</code>.</p>
<p><img src="images/206-auth/acls.jpeg" width="572" /></p>
<p>One ACL implementation with which you may be familiar is file
permissions on a Linux server. For example, if you have a Mac or are on
a Linux server, you can open your terminal, navigate to a directory and
do the following:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="auth.html#cb9-1"></a>$ <span class="fu">ls</span> -l</span>
<span id="cb9-2"><a href="auth.html#cb9-2"></a><span class="ex">-rwxr-xr-x</span>   1 alexkgold  staff   2274 May 10 12:09 README.md</span></code></pre></div>
<p>That first set of characters describes the ACL for the <code>README.md</code> file.
The first character <code>-</code> indicates this is a file, as opposed to a
directory of files (which would be <code>d</code>). Then there are three sets of 3
characters, <code>rwx</code>, which are short for <code>read</code>, <code>write</code>, and <code>execute</code>,
with the first group for the owner, <code>alexkgold</code>, the second group for
anyone else in the group <code>staff</code>, and the third set for anyone else.</p>
<p>So you can read <code>-rwxr-xr-x</code> as, <em>this is a file that <code>alexkgold</code> can
read, write or execute, and anyone else can read or execute, but not
edit</em>.</p>
<p>ACLs are pretty intuitive, but it turns out that when you are managing a
lot of users across a lot of files, directories, and services, they can
get pretty difficult to manage, so many organizations use Role Based
Access Control (RBAC).</p>
<p>RBAC adds a layer of abstraction between users and permissions, which
makes it a little harder to understand, but ultimately results in a much
more flexible system. In RBAC, permissions are not assigned to
individual pieces of content or to users or groups. Instead, permissions
are assigned to <em>roles</em>, and roles are given to users or
groups.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<p><img src="images/206-auth/rbac.jpeg" width="562" /></p>
<p>There are also further iterations on the RBAC model, like Attribute
Based Access Control (ABAC) or Policy Based Access Control (PBAC) in
which there’s a long list of attributes that could be considered for a
user to compute their permissions for a given service.</p>
</div>
</div>
<div id="auth-technologies" class="section level2">
<h2><span class="header-section-number">7.3</span> Auth Technologies</h2>
<div id="username-password" class="section level3">
<h3><span class="header-section-number">7.3.1</span> Username + Password</h3>
<p>Many pieces of software come with integrated authentication. When you
use those system, the product stores encrypted username and password
pairs in a database.</p>
<p>These setups are often really easy from an admin perspective – you just
set up individual users on the server. However, the flip side is that
users have one more username and password to remember, which is annoying
for them. Moreover, if you have more than a few users, or the system is
one of more than a few, it’s hard to manage users on a lot of different
systems. It can be a real pain to create accounts on a ton of different
systems when a new person joins the organization, or to remove their
permissions one-by-one when they leave.</p>
<p>For this reason, most IT/Admin organizations strongly prefer using some
sort of centralized identity store.</p>
</div>
<div id="pam" class="section level3">
<h3><span class="header-section-number">7.3.2</span> PAM</h3>
<p>Pluggable Authentication Modules (PAM) is a Linux system for doing
authentication. As of this writing, PAM is the default authentication
method for both RStudio Server and JupyterHub.</p>
<p><img src="images/206-auth/auth-pam.jpeg" width="539" /></p>
<p>Conceptually PAM is pretty straightforward. You install a service on a
Linux machine and configure it to use PAM authentication from the
underlying host. By default, PAM just authenticates against the users
configured on the Linux server, but it can also be configured to use
other sorts of “modules” to authenticate against other systems – most
commonly LDAP/AD or Kerberos. PAM can also be used to do things when
users login – the most common being initializing tokens or tickets to
other systems, like a database.</p>
<p>PAM is often paired with <strong>System Security Services Daemon (</strong>SSSD),
which is most commonly used to automatically create Linux users on a
server based on the identities stored in an LDAP/AD instance.</p>
<p>Though conceptually simple, reading, writing, and managing PAM modules
is kinda painful.</p>
<p>#TODO: Add PAM example</p>
</div>
<div id="ldapad" class="section level3">
<h3><span class="header-section-number">7.3.3</span> LDAP/AD</h3>
<p>Lightweight Directory Access Protocol (LDAP) is a relatively old, open,
protocol used for maintaining a set of entities and their attributes. To
be precise, LDAP is actually a protocol for maintaining and accessing
entities and their attributes in a tree. It happens that this is a
really good structure for maintaining permissions and roles of users at
an organization, and it’s the main thing LDAP is used for.</p>
<p>Active Directory (AD) is Microsoft’s implementation of LDAP, and is
by-far the most common LDAP “flavor” out there. AD so thoroughly owns
the LDAP enterprise market, that LDAP is often referred to as LDAP/AD.
There are other implementations you may run across, the most common
being OpenLDAP.</p>
<aside>
<p>Azure, Microsoft’s cloud provider, offers an authentication service
called <em>Azure Active Directory (AAD)</em>. Confusingly, AAD is usually used
in combination with SAML, not LDAP.</p>
</aside>
<p>It’s worth distinguishing the use of LDAP as an identity store from its
use as an authentication technology. As a tree-based database, LDAP is
uniquely well-suited to storing the identities, and other attributes of
people at the organization. However, as discussed below, using LDAP to
authenticate into actual services has security and convenience
drawbacks, and many organizations consider it outdated and insecure.</p>
<p>A lot of organizations are moving away from LDAP for authentication in
favor of token-based technologies like SAML or OAuth, but many are
keeping LDAP as their identity “source of truth” that is referenced by
the SAML or OAuth Identity Provider.</p>
<p>LDAP has three main disadvantages relative to other technologies. First,
LDAP requires that your credentials (username and password, usually)
actually be provided to the service you’re trying to use. This is
fundamentally insecure relative to a system where your credentials are
provided only to the identity provider, and the service just gets a
token verifying who you are. In token-based systems, adding additional
requirements like MFA or biometrics are easy, as they’re simply added at
the IdP layer. In contrast, doing those things in LDAP would require the
service to implement them, which usually is not the case, so you’re
usually limited to username and password.</p>
<p>The second disadvantage of LDAP is that it does not allow for central
administration of permissions. LDAP directly records only objects and
their attributes. Say, for example, you want only users of a particular
group to have access to a certain resource. In LDAP, you would have to
specify <em>in that resource</em> that it should only allow in users of that
group. This is in contrast to SAML/OAuth, where the authorization is
centrally managed.</p>
<p>Lastly, LDAP authentication is based on each service authenticating.
Once you authenticate, the service might give you a cookie so that your
login persists, but there is no general-purpose token that will allow
you to login to multiple services.</p>
<div id="how-ldap-works" class="section level4">
<h4><span class="header-section-number">7.3.3.1</span> How LDAP Works</h4>
<p>While the technical downsides of LDAP are real, the tradeoff is that the
technical operations of LDAP are pretty straightforward. In short, you
try to login to a service, the service collects your username and
password, sends it off to the LDAP server, and checks that your username
and password are valid.</p>
<p><img src="images/206-auth/auth-ldap.jpeg" width="564" /></p>
<p>Note that LDAP is purely for authentication. When you’re using LDAP,
authorization has to be handled separately, which is one of the
disadvantages.</p>
</div>
<div id="deeper-than-you-need-on-ldap" class="section level4">
<h4><span class="header-section-number">7.3.3.2</span> Deeper Than You Need on LDAP</h4>
<p>LDAP is a tree-based entity and value store. This means that LDAP stores
things and their attributes, which include a name and one or more
values. For example, my entry in a corporate LDAP directory might look
like this:</p>
<pre><code>cn: Alex Gold
mail: alex.gold@example.com
mail: alex.gold@example.org
department: solutions
mobile: 555-555-5555
objectClass = Person</code></pre>
<p>Most of these attributes should be pretty straightforward. <code>cn</code> is short
for common name, and is part of the way you look up an entity in LDAP
(more on that below). Each entity in LDAP must have an <code>objectClass</code>,
which determines the type of entity it is. In this case, I am a <code>Person</code>
, as opposed to a device, domain, organizationalRole, or room – all of
which are standard <code>objectClass</code>es.</p>
<p>Let’s say that your corporate LDAP looks like the tree below:</p>
<p><img src="images/206-auth/ldap-tree.jpeg" width="503" /></p>
<p>#TODO: make solutions an OU in final</p>
<p>The most common way to look up LDAP entities is with their
<em>distinguished name (DN)</em>, which is the path of names from the point
you’re starting all the way back to the root of the tree. In the tree
above, my DN would be <code>cn=alex,ou=solutions,dc=example,dc=com</code>.</p>
<p>Note that you read the DN from right to left to work your way down the
tree. Aside from <code>cn</code> for common name, other common fields include <code>ou</code>
for organizational unit, and <code>dc</code> for domain component.</p>
</div>
<div id="trying-out-ldap" class="section level4">
<h4><span class="header-section-number">7.3.3.3</span> Trying out LDAP</h4>
<p>Now that we understand in theory how LDAP works, let’s try out an actual
example.</p>
<p>To start, let’s stand up LDAP in a docker container:</p>
<p>#TODO: update ldif</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="auth.html#cb11-1"></a><span class="ex">docker</span> network create ldap-net</span>
<span id="cb11-2"><a href="auth.html#cb11-2"></a><span class="ex">docker</span> run -p 6389:389 \</span>
<span id="cb11-3"><a href="auth.html#cb11-3"></a>  --name ldap-service \</span>
<span id="cb11-4"><a href="auth.html#cb11-4"></a>  --network ldap-net \</span>
<span id="cb11-5"><a href="auth.html#cb11-5"></a>  --detach alexkgold/auth</span></code></pre></div>
<p><code>ldapsearch</code> is a utility that lets us run queries against the LDAP
tree. Let’s try it out against the LDAP container we just stood up.</p>
<p>Let’s say I want to return everything in the subtree under
<code>example.org</code>. In that case, I would run
<code>ldapsearch -b dc=example,dc=org</code>, where <code>b</code> indicates my search base,
which is a <code>dn</code>. But in order to make this actually work, we’ll need to
include a few more arguments, including</p>
<ul>
<li><p>the host where the LDAP server is, indicated by <code>-H</code></p></li>
<li><p>the bind DN we’ll be using, flagged with <code>-D</code></p></li>
<li><p>the bind password we’ll be using, indicated by <code>-w</code></p></li>
</ul>
<p>Since we’re testing, we’re also going to provide the flag <code>-x</code> to use
whatever certificate is present on the server. Putting it altogether,
along with the commands to reach the docker container, let’s try:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="auth.html#cb12-1"></a><span class="ex">ldapsearch</span> -x -H ldap://localhost:6389 -b dc=example,dc=org -D <span class="st">&quot;cn=admin,dc=example,dc=org&quot;</span> -w admin</span>
<span id="cb12-2"><a href="auth.html#cb12-2"></a></span>
<span id="cb12-3"><a href="auth.html#cb12-3"></a><span class="co"># extended LDIF</span></span>
<span id="cb12-4"><a href="auth.html#cb12-4"></a><span class="co">#</span></span>
<span id="cb12-5"><a href="auth.html#cb12-5"></a><span class="co"># LDAPv3</span></span>
<span id="cb12-6"><a href="auth.html#cb12-6"></a><span class="co"># base &lt;dc=example,dc=org&gt; with scope subtree</span></span>
<span id="cb12-7"><a href="auth.html#cb12-7"></a><span class="co"># filter: (objectclass=*)</span></span>
<span id="cb12-8"><a href="auth.html#cb12-8"></a><span class="co"># requesting: ALL</span></span>
<span id="cb12-9"><a href="auth.html#cb12-9"></a><span class="co">#</span></span>
<span id="cb12-10"><a href="auth.html#cb12-10"></a></span>
<span id="cb12-11"><a href="auth.html#cb12-11"></a><span class="co"># example.org</span></span>
<span id="cb12-12"><a href="auth.html#cb12-12"></a><span class="ex">dn</span>: dc=example,dc=org</span>
<span id="cb12-13"><a href="auth.html#cb12-13"></a><span class="ex">objectClass</span>: top</span>
<span id="cb12-14"><a href="auth.html#cb12-14"></a><span class="ex">objectClass</span>: dcObject</span>
<span id="cb12-15"><a href="auth.html#cb12-15"></a><span class="ex">objectClass</span>: organization</span>
<span id="cb12-16"><a href="auth.html#cb12-16"></a><span class="ex">o</span>: Example Inc.</span>
<span id="cb12-17"><a href="auth.html#cb12-17"></a><span class="ex">dc</span>: example</span>
<span id="cb12-18"><a href="auth.html#cb12-18"></a></span>
<span id="cb12-19"><a href="auth.html#cb12-19"></a><span class="co"># admin, example.org</span></span>
<span id="cb12-20"><a href="auth.html#cb12-20"></a><span class="ex">dn</span>: cn=admin,dc=example,dc=org</span>
<span id="cb12-21"><a href="auth.html#cb12-21"></a><span class="ex">objectClass</span>: simpleSecurityObject</span>
<span id="cb12-22"><a href="auth.html#cb12-22"></a><span class="ex">objectClass</span>: organizationalRole</span>
<span id="cb12-23"><a href="auth.html#cb12-23"></a><span class="ex">cn</span>: admin</span>
<span id="cb12-24"><a href="auth.html#cb12-24"></a><span class="ex">description</span>: LDAP administrator</span>
<span id="cb12-25"><a href="auth.html#cb12-25"></a><span class="ex">userPassword</span>:: e1NTSEF9d3IyVFp6SlAyKy9xT2RsQ0owTDYzR0RzNFo0NUFrQ00=</span>
<span id="cb12-26"><a href="auth.html#cb12-26"></a></span>
<span id="cb12-27"><a href="auth.html#cb12-27"></a><span class="co"># search result</span></span>
<span id="cb12-28"><a href="auth.html#cb12-28"></a><span class="ex">search</span>: 2</span>
<span id="cb12-29"><a href="auth.html#cb12-29"></a><span class="ex">result</span>: 0 Success</span>
<span id="cb12-30"><a href="auth.html#cb12-30"></a></span>
<span id="cb12-31"><a href="auth.html#cb12-31"></a><span class="co"># numResponses: 3</span></span>
<span id="cb12-32"><a href="auth.html#cb12-32"></a><span class="co"># numEntries: 2</span></span></code></pre></div>
<p>You should be able to read what got returned pretty seamlessly. One
thing to notice is that the user password is returned, so it can be
compared to a password provided. It is encrypted, so it doesn’t appear
in plain text.</p>
<p>Note that <code>ldap</code> is a protocol – so it takes the place of the <code>http</code>
you’re used to in normal web operations. Like there’s <code>https</code>, there is
also a protocol called <code>LDAPS</code>, which is <code>ldap</code> + <code>tls</code> for the same
reason you’ve got <code>https</code>. LDAP is (almost) always running in the same
private network as the service, so many organizations don’t require
using LDAPS, but others do require it.</p>
<p>Running the ldapadmin</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="auth.html#cb13-1"></a><span class="ex">docker</span> run -p 6443:443 \</span>
<span id="cb13-2"><a href="auth.html#cb13-2"></a>        --name ldap-admin \</span>
<span id="cb13-3"><a href="auth.html#cb13-3"></a>        --env PHPLDAPADMIN_LDAP_HOSTS=ldap-service \</span>
<span id="cb13-4"><a href="auth.html#cb13-4"></a>        --network ldap-net \</span>
<span id="cb13-5"><a href="auth.html#cb13-5"></a>        --detach osixia/phpldapadmin</span></code></pre></div>
<p>dn for admin <code>cn=admin,dc=example,dc=org</code> pw: <code>admin</code></p>
<p><a href="https://localhost:6443" class="uri">https://localhost:6443</a></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="auth.html#cb14-1"></a><span class="co"># Replace with valid license</span></span>
<span id="cb14-2"><a href="auth.html#cb14-2"></a><span class="bu">export</span> <span class="va">RSC_LICENSE=</span>XXXX-XXXX-XXXX-XXXX-XXXX-XXXX-XXXX</span>
<span id="cb14-3"><a href="auth.html#cb14-3"></a></span>
<span id="cb14-4"><a href="auth.html#cb14-4"></a><span class="co"># Run without persistent data and using default configuration</span></span>
<span id="cb14-5"><a href="auth.html#cb14-5"></a><span class="ex">docker</span> run -it --privileged \</span>
<span id="cb14-6"><a href="auth.html#cb14-6"></a>    --name rsc \</span>
<span id="cb14-7"><a href="auth.html#cb14-7"></a>    --volume <span class="va">$PWD</span>/rstudio-connect.gcfg:/etc/rstudio-connect/rstudio-connect.gcfg \</span>
<span id="cb14-8"><a href="auth.html#cb14-8"></a>    -p 3939:3939 \</span>
<span id="cb14-9"><a href="auth.html#cb14-9"></a>    -e RSC_LICENSE=<span class="va">$RSC_LICENSE</span> \</span>
<span id="cb14-10"><a href="auth.html#cb14-10"></a>    --network ldap-net \</span>
<span id="cb14-11"><a href="auth.html#cb14-11"></a>    rstudio/rstudio-connect:latest</span></code></pre></div>
</div>
<div id="single-vs-double-bind" class="section level4">
<h4><span class="header-section-number">7.3.3.4</span> Single vs Double Bind</h4>
<p>There are two different ways to establish a connection between your
server and the LDAP server. The first method is called <em>Single Bind</em>. In
a single bind authentication, the user credentials are used <strong>both</strong> to
authenticate to the LDAP server, and to query the server.</p>
<p>In a <em>Double Bind</em> configuration, there is a separate administrative
service account, used to authenticate to the LDAP server. Once
authentication is complete, then the user is queried in the system.</p>
<p>Single bind configurations are often more limited than double bind ones.
For example, in most cases you’ll only be able to see the single user as
well as the groups they’re a part of. This can limit application
functionality in some cases. On the other hand, there need be no master
key maintained on your server, and some admins may prefer it for
security reasons.</p>
<p>We can see this really concretely. In the example above, you used a
double bind by supplying admin credentials to LDAP. Let’s say instead,
you just provide a single user’s credentials. In that case, I don’t get
anything back if I just do a general search.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="auth.html#cb15-1"></a><span class="ex">ldapsearch</span> -x -H ldap://localhost:6389 -b dc=example,dc=org -D <span class="st">&quot;cn=joe,dc=engineering,dc=example,dc=org&quot;</span> -w joe                                       </span>
<span id="cb15-2"><a href="auth.html#cb15-2"></a><span class="co"># extended LDIF</span></span>
<span id="cb15-3"><a href="auth.html#cb15-3"></a><span class="co">#</span></span>
<span id="cb15-4"><a href="auth.html#cb15-4"></a><span class="co"># LDAPv3</span></span>
<span id="cb15-5"><a href="auth.html#cb15-5"></a><span class="co"># base &lt;dc=example,dc=org&gt; with scope subtree</span></span>
<span id="cb15-6"><a href="auth.html#cb15-6"></a><span class="co"># filter: (objectclass=*)</span></span>
<span id="cb15-7"><a href="auth.html#cb15-7"></a><span class="co"># requesting: ALL</span></span>
<span id="cb15-8"><a href="auth.html#cb15-8"></a><span class="co">#</span></span>
<span id="cb15-9"><a href="auth.html#cb15-9"></a></span>
<span id="cb15-10"><a href="auth.html#cb15-10"></a><span class="co"># search result</span></span>
<span id="cb15-11"><a href="auth.html#cb15-11"></a><span class="ex">search</span>: 2</span>
<span id="cb15-12"><a href="auth.html#cb15-12"></a><span class="ex">result</span>: 32 No such object</span>
<span id="cb15-13"><a href="auth.html#cb15-13"></a></span>
<span id="cb15-14"><a href="auth.html#cb15-14"></a><span class="co"># numResponses: 1</span></span></code></pre></div>
<p>But just searching for information about Joe does return his own
information.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="auth.html#cb16-1"></a><span class="ex">ldapsearch</span> -x -H ldap://localhost:6389 -b cn=joe,dc=engineering,dc=example,dc=org -D <span class="st">&quot;cn=joe,dc=engineering,dc=example,dc=org&quot;</span> -w joe                    32 ✘</span>
<span id="cb16-2"><a href="auth.html#cb16-2"></a><span class="co"># extended LDIF</span></span>
<span id="cb16-3"><a href="auth.html#cb16-3"></a><span class="co">#</span></span>
<span id="cb16-4"><a href="auth.html#cb16-4"></a><span class="co"># LDAPv3</span></span>
<span id="cb16-5"><a href="auth.html#cb16-5"></a><span class="co"># base &lt;cn=joe,dc=engineering,dc=example,dc=org&gt; with scope subtree</span></span>
<span id="cb16-6"><a href="auth.html#cb16-6"></a><span class="co"># filter: (objectclass=*)</span></span>
<span id="cb16-7"><a href="auth.html#cb16-7"></a><span class="co"># requesting: ALL</span></span>
<span id="cb16-8"><a href="auth.html#cb16-8"></a><span class="co">#</span></span>
<span id="cb16-9"><a href="auth.html#cb16-9"></a></span>
<span id="cb16-10"><a href="auth.html#cb16-10"></a><span class="co"># joe, engineering.example.org</span></span>
<span id="cb16-11"><a href="auth.html#cb16-11"></a><span class="ex">dn</span>: cn=joe,dc=engineering,dc=example,dc=org</span>
<span id="cb16-12"><a href="auth.html#cb16-12"></a><span class="ex">cn</span>: joe</span>
<span id="cb16-13"><a href="auth.html#cb16-13"></a><span class="ex">gidNumber</span>: 500</span>
<span id="cb16-14"><a href="auth.html#cb16-14"></a><span class="ex">givenName</span>: Joe</span>
<span id="cb16-15"><a href="auth.html#cb16-15"></a><span class="ex">homeDirectory</span>: /home/joe</span>
<span id="cb16-16"><a href="auth.html#cb16-16"></a><span class="ex">loginShell</span>: /bin/sh</span>
<span id="cb16-17"><a href="auth.html#cb16-17"></a><span class="ex">mail</span>: joe@example.org</span>
<span id="cb16-18"><a href="auth.html#cb16-18"></a><span class="ex">objectClass</span>: inetOrgPerson</span>
<span id="cb16-19"><a href="auth.html#cb16-19"></a><span class="ex">objectClass</span>: posixAccount</span>
<span id="cb16-20"><a href="auth.html#cb16-20"></a><span class="ex">objectClass</span>: top</span>
<span id="cb16-21"><a href="auth.html#cb16-21"></a><span class="ex">sn</span>: Golly</span>
<span id="cb16-22"><a href="auth.html#cb16-22"></a><span class="ex">uid</span>: test\joe</span>
<span id="cb16-23"><a href="auth.html#cb16-23"></a><span class="ex">uidNumber</span>: 1000</span>
<span id="cb16-24"><a href="auth.html#cb16-24"></a><span class="ex">userPassword</span>:: e01ENX1qL01raWZrdk0wRm1sTDZQM0MxTUlnPT0=</span>
<span id="cb16-25"><a href="auth.html#cb16-25"></a></span>
<span id="cb16-26"><a href="auth.html#cb16-26"></a><span class="co"># search result</span></span>
<span id="cb16-27"><a href="auth.html#cb16-27"></a><span class="ex">search</span>: 2</span>
<span id="cb16-28"><a href="auth.html#cb16-28"></a><span class="ex">result</span>: 0 Success</span>
<span id="cb16-29"><a href="auth.html#cb16-29"></a></span>
<span id="cb16-30"><a href="auth.html#cb16-30"></a><span class="co"># numResponses: 2</span></span>
<span id="cb16-31"><a href="auth.html#cb16-31"></a><span class="co"># numEntries: 1</span></span></code></pre></div>
</div>
</div>
<div id="kerberos-tickets" class="section level3">
<h3><span class="header-section-number">7.3.4</span> Kerberos Tickets</h3>
<p>Kerberos is a relatively old ticket-based auth technology. In Kerberos,
encrypted tickets are passed around between servers. Because these
tickets live entirely on servers under the control of the organization,
they are generally quite secure.</p>
<p>Though Kerberos is freely available, it was widely adopted along with
Active Directory, and it’s used almost exclusively in places that are
running a lot of Microsoft products. A frequent use of Kerberos tickets
is to establish database connections.</p>
<p>Because the tickets are passed around from server to server, Kerberos
can be used to create a true SSO experience for users.</p>
<div id="how-kerberos-works" class="section level4">
<h4><span class="header-section-number">7.3.4.1</span> How Kerberos Works</h4>
<p>All of Kerberos works by sending information to and from the central
<em>Kerberos Domain Controller</em> (KDC)<em>.</em> In Kerberos, authentication and
authorization are handled independently.</p>
<p>When a Kerberos session is initialized, the service sends the users
credentials off to the KDC and requests something called the Ticket
Granting Ticket (TGT) from the KDC. TGTs have a set expiration period.
When they expire, the client has to request an updated TGT. This is one
reason why Kerberos is considered quite secure - even if someone managed
to steal a TGT, they’d only be able to use it for a little while before
it went stale and could be revoked.</p>
<p>When the user wants to actually do something, they send the TGT back to
the KDC again and get a <em>session key</em> (sometimes referred to as a
<em>service ticket</em>) that allows access to the service, usually with a
specified expiration period.</p>
<p><img src="images/206-auth/auth-kerberos.jpeg" width="553" /></p>
</div>
<div id="try-out-kerberos" class="section level4">
<h4><span class="header-section-number">7.3.4.2</span> Try out Kerberos</h4>
<p>#TODO</p>
</div>
</div>
<div id="saml" class="section level3">
<h3><span class="header-section-number">7.3.5</span> SAML</h3>
<p>These days Security Assertion Markup Language (SAML) is probably the
most common system that provides true SSO – including single login and
centrally-managed permissions. SAML does this by passing around XML
tokens.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
<p>The way this generally works is that a user attempts to login to a
<em>Service Provider</em> (SP). The SP redirects the user to an Identity
Provider (IdP), which checks either for a preexisting token in the users
browser, or verifies the users credentials. The IdP checks for the
user’s authorization to access the SP in question, and sends an
authorization token back to the SP.</p>
<p><img src="images/206-auth/auth-saml.jpeg" width="551" /></p>
<p>Relative to LDAP/AD, which is from the early 1990s, SAML is a new kid on
the block. SAML 1.0 was introduced in 2002, and SAML 2.0, which is the
current standard, came out in 2005. Many large enterprises are switching
their systems over to use SAML or have already done so.</p>
<p>One superpower of SAML IdPs is that many of them can <em>federate</em> identity
management to other systems. So, it’s pretty common for large
enterprises to maintain their user base in one or more LDAP/AD system,
but actually use a SAML IdP to do authentication and authorization. In
fact, this is what Azure Active Directory (AAD), which is Microsoft
Azure’s hosted authentication offering does. It is possible to use
LDAP/AD with AAD, but most organizations use it with SAML.</p>
<p>One of the nice things about SAML is that credentials are never shared
directly with the SP. This is one of the ways in which SAML is
fundamentally more secure than LDAP/AD – the users credentials are only
ever shared with the IdP.</p>
<p>There are two different ways logins can occur – starting from the SP,
or starting from the IdP.</p>
<p>In SAML, the XML tokens that are passed back and forth are called
assertions.</p>
<div id="try-saml" class="section level4">
<h4><span class="header-section-number">7.3.5.1</span> Try SAML</h4>
<p>We’re going to use a simple SAML IdP to try out SAML a bit. This
container only supports a single SP. Any IdP that might be used in an
enterprise environment is going to support many SPs simultaneously.</p>
<p>Let’s go through the environment variables we’re providing to this
<code>docker run</code> command. We’re providing three different arguments:</p>
<ul>
<li><p>The <code>SP_ENTITY_ID</code> is the URL of the</p></li>
<li><p><code>SP_ASSERTION_CONSUMER_SERVICE</code> is the URL of the SP that is
prepared to receive the authorized responses coming back from the
SAML IdP.</p></li>
<li><p><code>SP_SINGLE_LOGOUT_SERVICE</code> is the URL where the SP will receive a
logout command once someone has been logged out at the IdP level.
Many SPs do not implement single logout.</p></li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="auth.html#cb17-1"></a><span class="ex">docker</span> run --name=saml_idp \</span>
<span id="cb17-2"><a href="auth.html#cb17-2"></a>-p 8080:8080 \</span>
<span id="cb17-3"><a href="auth.html#cb17-3"></a>-p 8443:8443 \</span>
<span id="cb17-4"><a href="auth.html#cb17-4"></a>-e SIMPLESAMLPHP_SP_ENTITY_ID=http://app.example.com \</span>
<span id="cb17-5"><a href="auth.html#cb17-5"></a>-e SIMPLESAMLPHP_SP_ASSERTION_CONSUMER_SERVICE=http://localhost/simplesaml/module.php/saml/sp/saml2-acs.php/test-sp \</span>
<span id="cb17-6"><a href="auth.html#cb17-6"></a>-e SIMPLESAMLPHP_SP_SINGLE_LOGOUT_SERVICE=http://localhost/simplesaml/module.php/saml/sp/saml2-logout.php/test-sp \</span>
<span id="cb17-7"><a href="auth.html#cb17-7"></a>-d alexkgold/auth</span></code></pre></div>
<p><a href="http://localhost:8080/simplesaml" class="uri">http://localhost:8080/simplesaml</a></p>
<p>admin/secret</p>
</div>
</div>
<div id="oidcoauth2.0" class="section level3">
<h3><span class="header-section-number">7.3.6</span> OIDC/OAuth2.0</h3>
<p>OIDC/OAuth is slightly newer than SAML, created in 2007 by engineers at
Google and Twitter. OAuth 2.0 – the current standard was released in
2012. If you’re being pedantic, OAuth is a authorization protocol, and
OpenID Connect (OIDC) is an authorization protocol that uses OAuth. In
most cases, people will just call it OAuth.</p>
<p><img src="images/206-auth/auth-oauth.jpeg" /></p>
<p>#TODO: this picture is bad</p>
<p>In an enterprise context, OAuth/OIDC is conceptually very similar to
SAML – but instead of passing around XML tokens, it’s based on JSON Web
Tokens (JWT, usually pronounced “jot”).</p>
<aside>
<p>The fact that JSON is much more human-readable than XML is one of the
big advantages of OIDC/OAuth compared to SAML.</p>
</aside>
<p>#TODO: try it out</p>
<div id="oauthoidc-vs-saml" class="section level4">
<h4><span class="header-section-number">7.3.6.1</span> OAuth/OIDC vs SAML</h4>
<p>From a practical perspective, the biggest difference between OAuth/OIDC
and SAML is that SAML is quite strict about what SPs are allowed. Each
SP needs to be registered at a specific web address that the IdP knows
it’s allowed to receive requests from.</p>
<p>In contrast, OAuth/OIDC was designed to be used to delegate
authentication and authorization to different kinds of services that
might be widely available on the internet. If you’ve ever allowed a
website to <em>Login with Apple/Google/Facebook/Github</em>, that has been an
application of OAuth/OIDC.</p>
<p>Because the set of allowable SPs is fixed under SAML, it’s more common
in enterprise settings. Some admins consider SAML more secure for that
reason as well.</p>
<p>In some situations, SAML is used for authentication and OAuth is used
for access to other services. Most commonly in the data science world,
this can come up when a user logs into a service like RStudio Server and
is then authorized to a database using an OAuth JWT.</p>
<p>Resources: <a href="https://www.okta.com/identity-101/saml-vs-oauth/" class="uri">https://www.okta.com/identity-101/saml-vs-oauth/</a>
<a href="https://www.okta.com/identity-101/whats-the-difference-between-oauth-openid-connect-and-saml/" class="uri">https://www.okta.com/identity-101/whats-the-difference-between-oauth-openid-connect-and-saml/</a>
<a href="https://phoenixnap.com/blog/kerberos-authentication" class="uri">https://phoenixnap.com/blog/kerberos-authentication</a>
<a href="https://www.dnsstuff.com/rbac-vs-abac-access-control" class="uri">https://www.dnsstuff.com/rbac-vs-abac-access-control</a></p>

</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p>Depending on the system, this token or ticket can
live in various places.<a href="auth.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>As we’ll see in a second, permissions can actually
belong to entities other than people…but that’s a little
complicated for the moment.<a href="auth.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>If you think about this for a minute, it may occur to
you “isn’t RBAC basically the same as doing ACLs at the group
level?” Yes, yes it is, but it can be helpful to have groups and
roles be separated, even if there’s a 1-1 mapping.<a href="auth.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>XML is a markup language, much like HTML. The good
thing about XML is that it’s very flexible. The bad thing is that
it’s relatively hard for a human to easily read.<a href="auth.html#fnref7" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ssh.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="choosing-and-using-a-data-architecture.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/akgold/do4ds/edit/main/206-browser_auth.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
