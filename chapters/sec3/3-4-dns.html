<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DevOps for Data Science - 13&nbsp; DNS allows for human-readable addresses</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../chapters/sec3/3-5-ssl.html" rel="next">
<link href="../../chapters/sec3/3-3-networking.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-BTSMMRMH08"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-BTSMMRMH08', { 'anonymize_ip': true});
</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">DNS allows for human-readable addresses</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">DevOps for Data Science</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/akgold/do4ds" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">Welcome!</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/intro.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../chapters/sec1/1-0-sec-intro.html" class="sidebar-item-text sidebar-link">DevOps Lessons for Data Science</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-1-code-promotion.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Code promotion and integration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-2-env-as-code.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Environments as Code</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-3-data-arch.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Pipeline Architecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-4-apis.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Designing Your Application Layers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-5-monitor-log.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Logging and Monitoring</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../chapters/sec2/2-0-sec-intro.html" class="sidebar-item-text sidebar-link">IT/Admin Tools</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec2/2-1-terminal.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The Terminal</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec2/2-2-ssh.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Connecting Securely with SSH</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec2/2-3-cmd-line.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Getting comfortable on the Command Line</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec2/2-4-docker.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Docker for Data Science</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../chapters/sec3/3-0-sec-intro.html" class="sidebar-item-text sidebar-link">IT/Admin for Data Science</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-1-cloud.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Getting Started with the Cloud</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-2-linux-admin.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Basic Linux SysAdmin</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-3-networking.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Intro to Computer Networks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-4-dns.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">DNS allows for human-readable addresses</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-5-ssl.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">You should use SSL/HTTPS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-6-servers.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Choosing the right server for you</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../chapters/sec4/4-0-sec-intro.html" class="sidebar-item-text sidebar-link">Making it Enterprise-Grade</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec4/4-1-os-ds-in-ent.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Open Source Data Science in the Enterprise</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec4/4-2-ent-networks.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Enterprise Networking</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec4/4-3-auth.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Auth in Enterprise</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec4/4-4-ent-servers.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Enterprise Server Management</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/append/docker-cheatsheet.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Docker Cheatsheet</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/append/auth.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Auth Technical Details</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#how-dns-lookups-work" id="toc-how-dns-lookups-work" class="nav-link active" data-scroll-target="#how-dns-lookups-work"><span class="toc-section-number">13.1</span>  How DNS lookups work</a></li>
  <li><a href="#how-dns-is-configured" id="toc-how-dns-is-configured" class="nav-link" data-scroll-target="#how-dns-is-configured"><span class="toc-section-number">13.2</span>  How DNS is configured</a></li>
  <li><a href="#comprehension-questions" id="toc-comprehension-questions" class="nav-link" data-scroll-target="#comprehension-questions"><span class="toc-section-number">13.3</span>  Comprehension Questions</a></li>
  <li><a href="#lab-configuring-dns-for-your-server" id="toc-lab-configuring-dns-for-your-server" class="nav-link" data-scroll-target="#lab-configuring-dns-for-your-server"><span class="toc-section-number">13.4</span>  Lab: Configuring DNS for your server</a>
  <ul class="collapse">
  <li><a href="#step-1-allocate-elastic-ip" id="toc-step-1-allocate-elastic-ip" class="nav-link" data-scroll-target="#step-1-allocate-elastic-ip"><span class="toc-section-number">13.4.1</span>  Step 1: Allocate Elastic IP</a></li>
  <li><a href="#step-2-buy-a-domain" id="toc-step-2-buy-a-domain" class="nav-link" data-scroll-target="#step-2-buy-a-domain"><span class="toc-section-number">13.4.2</span>  Step 2: Buy a domain</a></li>
  <li><a href="#step-3-configure-dns" id="toc-step-3-configure-dns" class="nav-link" data-scroll-target="#step-3-configure-dns"><span class="toc-section-number">13.4.3</span>  Step 3: Configure DNS</a></li>
  <li><a href="#step-4-wait-an-annoyingly-long-time" id="toc-step-4-wait-an-annoyingly-long-time" class="nav-link" data-scroll-target="#step-4-wait-an-annoyingly-long-time"><span class="toc-section-number">13.4.4</span>  Step 4: Wait an annoyingly long time</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/akgold/do4ds/edit/main/chapters/sec3/3-4-dns.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-dns" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">DNS allows for human-readable addresses</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In <a href="3-3-networking.html">Chapter&nbsp;<span>12</span></a> you learned all about how IP addresses are where a resource lives on a computer network. But you’ve been using the internet for a long time and you’ve rarely – if ever – actually used an IP address. What gives?</p>
<p>IP addresses are hard to remember. And worse, they can change when servers are replaced or changed.</p>
<p>To make the internet a little more human-friendly, the creators of the internet built the <em>domain name system</em> (DNS) that translates between human-readable <em>domains</em> and the IP addresses where the resources actually live.</p>
<p>When you create or launch a website, you’ll purchase <em>domain</em> like <span class="math inline">\(do4ds.com\)</span>. Purchasing a domain (renting one, really) gives you the right to attach that domain to an IP address so people can access the resources you choose at that address.</p>
<p><a href="3-3-networking.html">Chapter&nbsp;<span>12</span></a> introduced full URLs. Where the main address goes, I handwaved a little because I was switching back and forth between IP addresses and domains. In this chapter, we’re going to get really specific about how that substitution works, so we’re going to focus on the address part of it. In particular, we’re going to learn about Fully-Qualified Domain Names (FQDN).</p>
<p>A site’s FQDN looks like this:</p>
<p><span class="math display">\[
\overbrace{https}^{\text{protocol}}://\overbrace{blog}^{\text{Subdomain}}.\underbrace{\overbrace{example}^{\text{Domain Name}}.\overbrace{com}^{\text{Top-Level Domain}}}_{\text{Root Domain}}
\]</span></p>
<p>The <em>root domain</em> is the thing you actually purchase. It has two parts. The top-level domain specifies the root domain name server to use.</p>
<p>Each <em>domain name</em> is unique <em>only within the top-level domain</em>, so if you own the root domain <span class="math inline">\(example.com\)</span>, there’s nothing stopping someone else from getting <span class="math inline">\(example.org\)</span> or <span class="math inline">\(example.ai\)</span>.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
So many top-level domains
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you feel like the number of top-level domains has exploded in the last few years, you’re right.</p>
<p>When the web first launched, there were only a limited number of top-level domains like <code>.com</code>, <code>.org</code>, and <code>.net</code> and ICANN – the group that controls how domains are assigned – controlled them all.</p>
<p>In 2013, ICANN decided to allow people and organizations to register <em>their own</em> top-level domains. That’s why there’s been an explosion in websites at top level domains like <code>.io</code>, <code>.ai</code>, and <code>.fun</code> in the last decade or so.</p>
<p>I think it’d be fun to have my own top-level domain, so it’s unfortunate that owning a top-level domain is not something to do on a whim. In 2012, the initial application fee was $185,000.</p>
</div>
</div>
<p>The <em>protocol</em> is the application layer protocol, which we discussed in some depth in <a href="3-3-networking.html">Chapter&nbsp;<span>12</span></a>. For most web traffic, the protocol is <code>http</code>. We’ll discuss where the <code>s</code> comes from in <a href="3-5-ssl.html">Chapter&nbsp;<span>14</span></a> on SSL.</p>
<p><em>Subdomains</em> are a way to specify a <em>part</em> of a domain, usually to signify to users that its for a distinct purpose. If you control a domain, you also have ownership over all the subdomains in that domain.</p>
<p>Subdomains are entirely about organizing how users experience your website. They don’t need to have any relationship to the technical implementation of your website. For example, you might want to have a blog for your engineering team at <span class="math inline">\(example.com\)</span>. Whether you choose to host it at <span class="math inline">\(example.com/engineering/blog\)</span> or at <span class="math inline">\(blog.engineering.example.com\)</span> is purely a choice of user experience and organizational preference.</p>
<p>Poking around different Google services illustrates the arbitrary-ness of using subdomains vs paths. Some Google services are at subdomains. Gmail is at <span class="math inline">\(mail.google.com\)</span> and Google Drive is at <span class="math inline">\(drive.google.com\)</span>. Each of these is a distinct site I might visit for different purposes, but they’re all owned and maintained by Google – though probably by different teams.</p>
<p>On the other hand, Google Maps is accessible at <span class="math inline">\(maps.google.com\)</span>, but it just redirects to <span class="math inline">\(google.com/maps\)</span>. Google slides is also accessible at <span class="math inline">\(slides.google.com\)</span> and redirects to a path on a subdomain: <span class="math inline">\(docs.google.com/presentation\)</span>. This most likely reflects internal organizational divisions at Google.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
<code>www</code> is just a subdomain
</div>
</div>
<div class="callout-body-container callout-body">
<p>Sometimes the domains of websites are prefixed with <code>www</code> and sometimes not. What gives?</p>
<p><code>www</code> is just a subdomain. It’s short for <em>world wide web</em>.</p>
<p>When the internet was first started, it seemed like it might be important to differentiate the subdomain where the website would live from, for example, the email domain people at that organization would use.</p>
<p>That turned out not really to be the case.</p>
<p>These days, it is convention to make the <code>www</code> subdomain and the bare domain go to the same place.</p>
</div>
</div>
<section id="how-dns-lookups-work" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="how-dns-lookups-work"><span class="header-section-number">13.1</span> How DNS lookups work</h2>
<p>In <a href="3-3-networking.html">Chapter&nbsp;<span>12</span></a>, we discussed how packets gets routed to successively higher-level routers until there’s one that knows where the packet is going and sends it back down. It turns out that this process essentially happens <em>twice.</em> The first time is to get the IP address for the domain in a process called <em>DNS resolution.</em> The second time is when it actually sends the information to that IP address.</p>
<p>You can see the basic structure of a DNS lookup using the terminal command <code>nslookup</code>. Here’s the DNS routing for <span class="math inline">\(google.com\)</span>:</p>
<pre><code> ❯ nslookup google.com                                              
Server:     192.168.86.1
Address:    192.168.86.1#53

Non-authoritative answer:
Name:   google.com
Address: 142.251.163.113
Name:   google.com
Address: 142.251.163.100
Name:   google.com
Address: 142.251.163.138
Name:   google.com
Address: 142.251.163.101
Name:   google.com
Address: 142.251.163.102
Name:   google.com
Address: 142.251.163.139</code></pre>
<p>These addresses do change periodically, so they may no longer be valid by the time you read this. But if you want to go do an <code>nslookup</code> yourself, you can visit one of those IP addresses and see that it takes you right to the familiar <span class="math inline">\(google.com\)</span>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>DNS resolution is actually quite a complex process because every computer in the world needs to be able to resolve a DNS entry to the same IP address in a timely fashion. The simplest form of DNS lookup would be easy – there would just be one nameserver with the top-level domains and then one server for each top-level domain.</p>
<p>There are two problems with this theoretical DNS lookup – it wouldn’t be very resilient because of a lack of redundancy and it would be <em>slow</em>. In order to speed things up, the DNS system is highly decentralized.</p>
<p>Along with decentralization, DNS resolution relies on a lot of cacheing. When your computer or an intermediate DNS server looks up an IP address for you, it caches it. This is because its likely that if you’ve looked up a domain once, you’re going to do it again soon.</p>
<p>This is great if you are <em>using</em> the internet and don’t want to wait for DNS lookups, but when you’re changing the domains on servers you control, there are thousands of public DNS servers that a request could get routed to, and many of them may have outdated cache entries. DNS changes can take up to 24 hours to propagate.</p>
<p>That means that if you make a change and it’s not working, you have no idea whether you made a mistake or it just hasn’t propagated yet. It’s very annoying.</p>
<p>Sometimes, using a private browsing window will cause DNS cache refreshes, but not always.</p>
</section>
<section id="how-dns-is-configured" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="how-dns-is-configured"><span class="header-section-number">13.2</span> How DNS is configured</h2>
<p>From the perspective of someone trying to set up their own website, there’s only one DNS server that matters to you personally – the DNS server for your <em>domain name registrar</em>.</p>
<p>Domain name registrars are the companies that actually own domains. You can buy or rent one from them in order to have a domain on the internet.</p>
<p>Your first stop would be a domain name registrar where you’d find an available domain you like and pull out your credit card.</p>
<p>Costs for domain names vary widely. Buying a meaningless domain in a less popular top-level domain, say <code>ladskfmlsdf.me</code> can cost as little as $3 per year. On the other hand, buying a <code>.com</code> domain that’s a real word or phrase can be a few thousand dollars. There are articles every few years about some major company accidentally allowing their domain name to lapse and ransoming it back for stupid amounts of money.</p>
<p>Configuration of DNS is done by way of <em>records</em>, of which there are a menagerie of types you <em>can</em> configure. Luckily, most simple configurations only need <em>CNAME</em> and <em>A</em> records.</p>
<p>Here’s an imaginary DNS record table for the domain <code>example.com</code>:</p>
<table class="table">
<thead>
<tr class="header">
<th>Path/Host</th>
<th>Type</th>
<th>Target</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>@</code></td>
<td>A</td>
<td><code>143.122.8.32</code></td>
</tr>
<tr class="even">
<td><code>www</code></td>
<td>CNAME</td>
<td>example.com</td>
</tr>
<tr class="odd">
<td><code>*</code></td>
<td>A</td>
<td><code>143.122.8.33</code></td>
</tr>
</tbody>
</table>
<p>Let’s go through how to read this table.</p>
<p>Since we’re configuring <code>example.com</code>, the paths/hosts in this table are relative to <code>example.com</code>.</p>
<p>In the first row we’re configuring an A record to go to the target IP address. <em>A records</em> (or their IPv6 cousin <em>AAAA records</em>) map a domain to an actual IP address. The path <code>@</code> is a special symbol meaning exact match. So by this configuration, any traffic to <code>example.com</code> will be passed straight through to the specified IP address.</p>
<p>The second row deals with traffic to the <code>www</code> subdomain. <em>CNAME records</em> alias sub-domains. They’re most frequently used to map sub-domains to the main domain. Since this is a <code>CNAME</code> record for example.com, this record indicates that traffic to www.example.com should be treated exactly like traffic to <code>example.com</code>. Some domain providers do automatic redirection of <code>www</code> traffic, and so this row may not be necessary in some configurations.</p>
<p>The last record uses the wildcard symbol <code>*</code> to send all subdomain traffic that’s not already spoken for – say <code>blog.example.com</code> or <code>info.example.com</code> directly to the IP address specified. In this case, I’m sending all of those subdomains to a different IP address, maybe a 404 (not found) page – or maybe I’m serving all the subdomains off a different server.</p>
<p>So what happens is that your query goes through several layers of public DNS servers to get to the DNS entry for your domain name registrar. In many cases, you’ll directly configure your domain name registrar to point to your website or server – but you also can configure the domain name registrar to point at another set of DNS servers you actually control with an <em>NS record</em>.</p>
<p>If you’re setting up your own server, this probably isn’t the case, but some large enterprises do run their own private DNS servers.</p>
</section>
<section id="comprehension-questions" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="comprehension-questions"><span class="header-section-number">13.3</span> Comprehension Questions</h2>
<p>TODO</p>
</section>
<section id="lab-configuring-dns-for-your-server" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="lab-configuring-dns-for-your-server"><span class="header-section-number">13.4</span> Lab: Configuring DNS for your server</h2>
<p>In the last lab, we configured the server so that all of the services were served off of one single port that redirected to various subpaths.</p>
<p>Now we want to get a real URL for the server so that you don’t have to remember some random <code>ec2-</code> URL for your server. In this lab, we’ll configure DNS records for our server so it’s available at a real URL.</p>
<section id="step-1-allocate-elastic-ip" class="level3" data-number="13.4.1">
<h3 data-number="13.4.1" class="anchored" data-anchor-id="step-1-allocate-elastic-ip"><span class="header-section-number">13.4.1</span> Step 1: Allocate Elastic IP</h3>
<p>EC2 instances get assigned a public IP when they are started. That’s great – it makes it easy to do the kind of work we’ve done. But if you’ve stopped or restarted your server, you’ve you’ve probably noticed that the public IP address changed!</p>
<p>This is no good for configuring a long-lived DNS record that consistently routes to your server. So we’re going to use AWS’s <em>Elastic IP</em> service, which gives you a stable public IP address you can keep and move around from one instance to another as you wish.</p>
<p>Elastic IP payment is a little weird. You don’t get charged for Elastic IPs <em>as long as you’re using them</em>. So if your server is up and using an elastic IP, it’s all free. If you take your server down and want to reserve the Elastic IP so it’s the same when you bring it back up, you’ll pay. It’s very cheap for one IP (12 cents per day as of this writing), so don’t worry about it.</p>
<p>Basically AWS doesn’t want you hoarding Elastic IPs. Great – just make sure to give back the elastic IP if you take down your instance permanently.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The labs in this book are ordered to promote learning.</p>
<p>If you configure a server later for real, I’d recommend setting up an Elastic IP as soon as you bring the server up so you have a permanent IP address right off the bat.</p>
</div>
</div>
<p>To actually do it, find Elastic IP in the AWS console and allocate an address. Once it has been allocated, click through to the elastic IP and associate it with the default private IP address for your instance.</p>
<p>Note that once you make this change, your server will no longer be available at its old IP address, so you’ll have to SSH in at the new one. If you have SSH terminals open when you make the change, they will break.</p>
</section>
<section id="step-2-buy-a-domain" class="level3" data-number="13.4.2">
<h3 data-number="13.4.2" class="anchored" data-anchor-id="step-2-buy-a-domain"><span class="header-section-number">13.4.2</span> Step 2: Buy a domain</h3>
<p>You can buy a domain from any of the many domain purchasing services on the web. Now, it won’t be free, but many domains are very cheap.</p>
<p>The easiest place to buy a domain is via AWS’s <em>Route53</em> service. You can get domains on <em>Route53</em> for as little as $9 per year – but there are even cheaper services. For example, I was able to get the domain <span class="math inline">\(do4ds-lab.shop\)</span> for $1.98 for a year on <code>namecheap.com</code>, which has long been my choice for purchasing domains because it is indeed, cheap.</p>
</section>
<section id="step-3-configure-dns" class="level3" data-number="13.4.3">
<h3 data-number="13.4.3" class="anchored" data-anchor-id="step-3-configure-dns"><span class="header-section-number">13.4.3</span> Step 3: Configure DNS</h3>
<p>Once you’ve got your domain, you have to configure your DNS. You’ll have to create 2 A records – one each for the @ host and the * host pointing to your IP and one for the CNAME at the <code>www</code> with the value being your bare domain.</p>
<p>Exactly how you configure this will depend on the domain name provider you choose.</p>
<p>In NameCheap, my Advanced DNS configuration looks like this:</p>
<p><img src="images-traffic/namecheap-config.png" class="img-fluid"></p>
</section>
<section id="step-4-wait-an-annoyingly-long-time" class="level3" data-number="13.4.4">
<h3 data-number="13.4.4" class="anchored" data-anchor-id="step-4-wait-an-annoyingly-long-time"><span class="header-section-number">13.4.4</span> Step 4: Wait an annoyingly long time</h3>
<p>Now you just have to be patient. Unfortunately DNS takes time to propagate. After a few minutes (or hours?), your server should be reachable at your domain.</p>
<p>If it’s not (yet) reachable, try seeing if an incognito browser works. If it doesn’t, wait some more. When you run out of patience, try reconfiguring everything and check if it works now.</p>
<p>Note that we still haven’t configured SSL, so you’ll need to make sure to correct your browser away from the <code>https</code> URL.</p>


</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>If you try to do an <code>nslookup</code> on some websites – like <span class="math inline">\(do4ds.com\)</span>, you’ll notice the IP address doesn’t actually take you to this book’s site. That’s because this book isn’t actually hosted directly on a server. It’s instead hosted on GitHub pages – so the IP addresses <code>nslookup</code> finds are the Google Pages servers, which themselves know how to resolve <span class="math inline">\(do4ds.com\)</span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../chapters/sec3/3-3-networking.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Intro to Computer Networks</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../chapters/sec3/3-5-ssl.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">You should use SSL/HTTPS</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2022, Alex K Gold</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link active" href="https://github.com/akgold/do4ds" aria-current="page">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/alexkgold">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>