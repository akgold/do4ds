<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DevOps for Data Science - 10&nbsp; Getting Started with the Cloud</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../chapters/sec3/3-2-linux-admin.html" rel="next">
<link href="../../chapters/sec3/3-0-sec-intro.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EQR1RYSHQK"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-EQR1RYSHQK', { 'anonymize_ip': true});
</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../chapters/sec3/3-0-sec-intro.html">IT/Admin for Data Science</a></li><li class="breadcrumb-item"><a href="../../chapters/sec3/3-1-cloud.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Getting Started with the Cloud</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">DevOps for Data Science</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/akgold/do4ds" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../chapters/sec1/1-0-sec-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">DevOps Lessons for Data Science</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-1-env-as-code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Environments as Code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-2-proj-arch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Project Architecture Guidelines</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-3-data-access.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Using databases and data APIs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-4-monitor-log.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Logging and Monitoring</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec1/1-5-deployments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Deployments and code promotion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../chapters/sec2/2-0-sec-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">IT/Admin Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec2/2-1-cmd-line.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Opening the Command Line</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec2/2-2-cmd-line-use.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Using the Command Line</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec2/2-3-ssh.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Secure server connections with SSH</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec2/2-4-docker.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Demystifying Docker</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../chapters/sec3/3-0-sec-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">IT/Admin for Data Science</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-1-cloud.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Getting Started with the Cloud</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-2-linux-admin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Basic Linux SysAdmin</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-3-networking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Intro to Computer Networks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-4-dns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">DNS allows for human-readable addresses</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-5-ssl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">You should use SSL/HTTPS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec3/3-6-servers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Choosing the right server for you</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../chapters/sec4/4-0-sec-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Making it Enterprise-Grade</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec4/4-1-os-ds-in-ent.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Open Source Data Science in the Enterprise</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec4/4-2-ent-networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Enterprise Networking</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec4/4-3-auth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Auth in Enterprise</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/sec4/4-4-ent-servers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Enterprise Server Management</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/append/auth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Auth Technologies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/append/lab-map.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Lab Map</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#layers-of-cloud-services" id="toc-layers-of-cloud-services" class="nav-link active" data-scroll-target="#layers-of-cloud-services"><span class="header-section-number">10.1</span> Layers of cloud services</a></li>
  <li><a href="#common-services-for-data-science-usage" id="toc-common-services-for-data-science-usage" class="nav-link" data-scroll-target="#common-services-for-data-science-usage"><span class="header-section-number">10.2</span> Common services for data science usage</a></li>
  <li><a href="#comprehension-questions" id="toc-comprehension-questions" class="nav-link" data-scroll-target="#comprehension-questions"><span class="header-section-number">10.3</span> Comprehension Questions</a></li>
  <li><a href="#lab-intro-to-aws" id="toc-lab-intro-to-aws" class="nav-link" data-scroll-target="#lab-intro-to-aws"><span class="header-section-number">10.4</span> Lab: Intro to AWS</a>
  <ul class="collapse">
  <li><a href="#stand-up-an-ec2-instance" id="toc-stand-up-an-ec2-instance" class="nav-link" data-scroll-target="#stand-up-an-ec2-instance"><span class="header-section-number">10.4.1</span> Stand up an EC2 instance</a></li>
  <li><a href="#step-6-put-the-penguins-data-and-model-in-s3" id="toc-step-6-put-the-penguins-data-and-model-in-s3" class="nav-link" data-scroll-target="#step-6-put-the-penguins-data-and-model-in-s3"><span class="header-section-number">10.4.2</span> Step 6: Put the penguins data and model in S3</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/akgold/do4ds/edit/main/chapters/sec3/3-1-cloud.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-cloud" class="quarto-section-identifier"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Getting Started with the Cloud</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Let’s say your organization decides that they need a server to process a large monthly analytics job. If the year is before 2006, you basically only have one option, hosting a server yourself – usually called on-prem.</p>
<p>So before you can start running the job, you’ll need to buy a physical server, wait for it to be delivered, install it in a server rack, and get it configured with the proper operating system, networking, and connectivity. Only then can you start configuring it to run analytics workloads.</p>
<p>Things are different today. While there are still organizations who run on-prem analytics workloads, many organizations are moving or have moved their data science and analytics workloads to <em>the cloud</em>.</p>
<p>So, what is <em>the cloud</em>? To put it simply, the cloud is the term for the immense server farms owned by the provider companies who rent them to organizations in need of computational capacity. When you want to get a server from the cloud, you can just request a certain configuration from the cloud provider and you’ll have it within seconds.</p>
<p>In this chapter, we’re going to get into what the cloud is, why you might want to use it, and spend some time on a lab where we’ll get a cloud server of our own.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
A quick history of the cloud
</div>
</div>
<div class="callout-body-container callout-body">
<p>Around the year 2000, the Amazon.com team centralized their IT platform across the company so instead of each team running and hosting its own servers, they would get them from a centralized platform.</p>
<p>Over the next few years, Amazon execs realized that just like this service was valuable to other <em>teams</em> at Amazon, other <em>organizations</em> would also be interested in renting server capacity from AWS rather than running it themselves. They launched Amazon Web Services (AWS) in 2006. It wasn’t the first cloud service, but it was the first one to get major commercial traction.</p>
</div>
</div>
<p>Before we boost the cloud too much, let’s do some hype-busting.</p>
<p>Over the last decade, you’d often hear people say that they were going to save money by moving to the cloud. Often, the explanation was that the flexibility of the cloud was going to enable dynamic autoscaling of server capacity. So even if they paid a little more per hour, they were going to save so much by turning capacity way down at night that it’d work out in their favor.</p>
<p>It turns out that even with the cloud, the engineering needed to make autoscaling happen this smoothly is extremely hard and only the most sophisticated IT/Admin organizations have achieved anything close to this goal.</p>
<p>While there might be individual examples to the contrary, I think it’s safe to say this hasn’t materialized, and most organizations don’t save money by moving to the cloud.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
On (not) saving money in the cloud
</div>
</div>
<div class="callout-body-container callout-body">
<p>It’s hard to prove that any particular organization lost money in a cloud migration, but there’s a reason why AWS was only 13% of Amazon’s revenue in 2021, but a whopping 74% of the company’s profits for that year.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Additionally, an a16z report found that the total cost of ownership (TCO) – including staffing – for bringing server workloads in-house for large, established companies like Dropbox, was only 1/3 to 1/2 the amount of running the same workloads in a public cloud provider.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>There’s a reason why there’s a small consulting industry solely focused on saving money on AWS bills.</p>
</div>
</div>
<p>So let’s assume your organization isn’t going to beat the curve at autoscaling all their cloud services. Why should you move to the cloud?</p>
<p>The first – and most important – reason is flexibility. While the cloud may be more expensive than hosting servers on-prem, it’s way more flexible. In an on-prem-only world, your organization has to buy and host all the server capacity it needs. But in a world with cloud resources, you can have a new server up or rescale an existing one. This is an incredible ability for a small organization, an organization with unpredictable workloads, or for temporary workloads.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>The second reason is about IT team scope and competency. Say you work for a small organization with only a few employees. In the pre-cloud world, you couldn’t run a server until you hired or contracted with someone to run a server rack for you.</p>
<p>In today’s world, all you need to do is feel comfortable working on the command line – and you can get a server of your own.</p>
<p>It’s also worth considering the incentives of IT/Admin teams and professionals. IT/Admin teams tend to be stretched really thin, so the chance to offload a major component of their work – physically hosting servers – is really appealing. Moreover, as IT/Admin professionals have observed the world moving in a cloud-first direction, the resume-building incentives of individual professionals have moved towards the clouds. When I’m looking for my next job, it’s probably going to be way more valuable to say that I’m an expert at working with cloud-based Kubernetes clusters than saying that I’m really good at managing physical servers.</p>
<section id="layers-of-cloud-services" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="layers-of-cloud-services"><span class="header-section-number">10.1</span> Layers of cloud services</h2>
<p>While the basic premise of the cloud is <em>rent a server</em>, there are layers and layers of services on top of that basic premise. Depending on your organization’s needs, it may make sense to rent a very basic service, or a higher level one.</p>
<p>Let’s talk about cakes to help make the levels clear. This year, I’m planning to bake and decorate a beautiful cake for my friend’s birthday. It’s going to be a round layer cake with white frosting, and it’s going to say “Happy Birthday!” in teal with giant lavender frosting rosettes.</p>
<p>Now that I’ve decided what I’m making, I have a few different options for how I get there. If I’m a real DIY kind of person, I could buy all the ingredients from the grocery store and make everything from scratch. Or I could buy a cake mix – reducing the likelihood I’ll buy the wrong ingredients or end up with unnecessary leftovers. Or maybe I don’t want to bake at all – I could just buy a premade cake already covered in white frosting and just do the writing and the rosettes.</p>
<p>The choice of how much to DIY my friend’s birthday cake and how much to get from a bakery is very much akin to your choices when buying server capacity from the cloud.</p>
<p>TODO: Image of getting cake w/ IaaS, PaaS, SaaS</p>
<p>In the US, a huge fraction of server workloads run on servers rented from one of the “big three clouds” – Amazon Web Services (AWS), Microsoft Azure, and Google Cloud Platform (GCP). There are also numerous smaller cloud providers, many of which target more specific use cases.</p>
<p>It’s totally possible to just rent the raw ingredients from these cloud providers – they’ll happily rent you the most basic cloud services like servers, networking, and storage and let you put them together yourself. This kind of cloud service – the equivalent of baking from scratch – is called <em>Infrastructure as a Service</em> (IaaS, pronounced <em>eye-az</em>).</p>
<p>But then I’m responsible for managing all of the reproducibility stack – I have to make sure the servers are up to date with new operating systems and security patches, while also ensuring there are modern versions of R and Python on the system, and making sure there are RStudio and Jupyter Notebooks present.</p>
<p>But just as you might not want to have to buy eggs, milk, and sugar just to end up with a pretty cake, IT/Admin organizations are increasingly taking advantage of the cloud equivalent of cake mixes and premade blank sheet cakes.</p>
<p>If I want to offload more of the work, I can think about a Platform as a Service (PaaS – pronounced pass) solution. This would give me the ability to somehow define an environment and send it somewhere to run without worrying about the underlying servers. For example, I might want to build a docker container with Python and Jupyter Notebook and host it somewhere that autoscales for the number of users and the amount of other resources needed.</p>
<p>There are a bunch of different entities you can run in this way, and services to match each. For example, if you want to run a general app, you can use something like AWS’s Elastic Beanstalk to run a user-facing app that dynamically scales (TODO: Azure/GCP equivalents), if you want to run a container, you might use XXXX, and if you want to get a Kubernetes cluster as a service, you might use XXXX. If you want to just run a function, there’s always AWS Lambda.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>I am not recommending you run a data science workbench on a service like Elastic Beanstalk. This actually tends not to work very well, for reasons we’ll get into in a bit.</p>
</div>
</div>
<p>If I want to go one level more abstracted, I might want to go with a Software as a Service (SaaS - pronounced <em>sass</em>) solution. This would be something like one of the cloud providers hosted machine learning environment where you can train, deploy, and monitor machine learning models. AWS has SageMaker, Azure has Azure Machine Learning, and GCP has Vertex AI. And there are organizations that host popular data science tools like Posit.cloud and Saturn Cloud that you can use.</p>
<p>Sometimes you’ll hear people describe PaaS or SaaS solutions called “going serverless”.</p>
<p>The first thing to understand about serverless computing is that <em>there is no such thing as serverless computing</em>.</p>
<p>Every bit of cloud computation runs on a server - the question is whether <strong>you</strong> have to deal with the server or if you just deal with a preconfigured service.</p>
<p>In this book, we’ll be working exclusively with IaaS services – taking the most basic services and building up a working data science environment. Once you understand how these pieces fit together, you’ll be in a much better place if it turns out your organization wants to leverage more abstracted versions of those services.</p>
</section>
<section id="common-services-for-data-science-usage" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="common-services-for-data-science-usage"><span class="header-section-number">10.2</span> Common services for data science usage</h2>
<p>If you’re not familiar with cloud provider terminology, it can be very hard to tell what service you might need from a cloud provider, and they don’t really help the matter. It’s very common (especially in AWS) to have many different services that fulfill similar needs, and it can be really hard to concretely tell the difference.</p>
<p>Making the issue even more difficult, many companies go out of their way to make their services sound grand and important and don’t just say, “this is a ___ you can rent”.</p>
<p>It’s helpful to keep in mind that at the very bottom, all you’re doing is renting servers and storage and managing networking and permissions for the servers and storage. Every other service is just a combination of server, storage, networking, and permissions that comes with software pre-installed or configured to make your life easier.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>We’re going to talk through some of the basic services that are offered by each of the three major cloud platforms.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Cloud service naming
</div>
</div>
<div class="callout-body-container callout-body">
<p>Azure and GCP tend to name their offerings pretty literally, while AWS chooses cutesy names that have, at best, a tangential relationship to the task at hand. I’m going to try to name the services for each of the purposes I’m talking about, but it’s worth noting that feature sets aren’t exactly parallel across cloud providers.</p>
<p>This makes AWS names a little harder to learn, but much easier to recall once you’ve learned them. In this section – contrary to standard practice – I’m going to use the common abbreviated names for AWS services and put the full name in parentheses as these are just trivia.</p>
</div>
</div>
<p>Remember, at the bottom of all cloud services are servers and each of cloud service provider has a service that is “just rent me a server”. AWS has EC2 (Elastic Cloud Compute) and Azure has Azure VMs, and Google has Google Compute Engine.</p>
<p>Along with servers, there are two main kinds of storage you’ll rent. The first is file storage, where you’ll store things in a file directory like on your laptop. These are AWS’s EBS (Elastic Block Store), Azure Managed Disk, and Google Persistent Disk.</p>
<p>The major cloud providers all also have blob (Binary Large Object) storage. Blob storage allows you to store individual objects somewhere and recall them to any other machine that has access to the blob store. The major blob stores are AWS Simple Storage Service (S3), Azure Blob Storage, and Google Cloud Storage.</p>
<p>There are also two important networking services for each of the clouds – a way to make a private network and a way to do DNS routing. If you don’t know what these mean, there will be a lot more detail in <a href="3-3-networking.html">Chapter&nbsp;<span>12</span></a>. For now, it’s enough to know that private networking is done in AWS’s VPC (Virtual Private Cloud), Azure’s Virtual Network, and Google’s Virtual Private Cloud. DNS is done in AWS’s Route 53, Azure DNS, and Google Cloud DNS.</p>
<p>Once you’ve got all this stuff up and running, you need to make sure that permissions are set in the right way. AWS has IAM (Identity and Access Management), Azure has Azure Active Directory, and Google has Identity Access Management.</p>
<p>Now, there are a variety of things you might want to do past these basic tasks of server, storage, networking, and access management. Here are a few more services you’ll likely hear about over time.</p>
<table class="table">
<colgroup>
<col style="width: 24%">
<col style="width: 26%">
<col style="width: 24%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th>Service</th>
<th>AWS</th>
<th>Azure</th>
<th>GCP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Kubernetes cluster</td>
<td>EKS (Elastic Kubernetes Service)</td>
<td>AKS (Azure Kubernetes Service)</td>
<td>GKE (Google Kubernetes Engine)</td>
</tr>
<tr class="even">
<td>Run a function as an API</td>
<td>Lambda</td>
<td>Azure Functions</td>
<td>Google Cloud Functions</td>
</tr>
<tr class="odd">
<td>Database</td>
<td>RDS/Redshift<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></td>
<td>Azure Database</td>
<td>Google Cloud SQL</td>
</tr>
<tr class="even">
<td>ML Platform</td>
<td>SageMaker</td>
<td>Azure ML</td>
<td>Vertex AI</td>
</tr>
</tbody>
</table>
</section>
<section id="comprehension-questions" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="comprehension-questions"><span class="header-section-number">10.3</span> Comprehension Questions</h2>
<ol type="1">
<li>What is the difference between PaaS, IaaS, and SaaS? What’s an example of each that you’re familiar with?</li>
<li>What are the names for AWS’s services for: renting a server, file system storage, blob storage</li>
</ol>
</section>
<section id="lab-intro-to-aws" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="lab-intro-to-aws"><span class="header-section-number">10.4</span> Lab: Intro to AWS</h2>
<p>Welcome to the lab!</p>
<p>The point of these exercises is to get you hands on with running servers and get you practicing the things you’re learning in the rest of the book.</p>
<p>If you walk through the labs sequentially, you’ll end up with a working data science workbench. It won’t suffice for any enterprise-level requirements, but it’ll be secure enough for a hobby project or even a small team.</p>
<p>These days most people are using servers from a cloud provider. We’re going to use AWS, as they’re by far the biggest cloud provider and the one you’re most likely to run into in the real world.</p>
<p>At a high level, you can do all of this with any cloud provider. Feel free to try if you prefer Azure or GCP, but the details on how to get started and service names will be different.</p>
<p>In the lab for this chapter, we’re going to get you up and running with an AWS account and show you how to manage, start, and stop EC2 instances in AWS.</p>
<p>The server we’ll stand up will be from AWS’s <em>free tier</em> – so there will be no cost involved as long as you haven’t used up all your AWS free tier credits before now.</p>
<p>For AWS things, I’m going to tell you what to do…but not the exact buttons, as AWS frequently changes the interface and this will almost certainly be out-of-date by the time you read it. The high level steps won’t change though.</p>
<p>Throughout the lab, we’re going to go step by step through getting things done. If you know how to do any of the steps, I’d recommend you at least skim the step for any important details.</p>
<section id="stand-up-an-ec2-instance" class="level3" data-number="10.4.1">
<h3 data-number="10.4.1" class="anchored" data-anchor-id="stand-up-an-ec2-instance"><span class="header-section-number">10.4.1</span> Stand up an EC2 instance</h3>
<section id="step-1-login-to-the-aws-console" class="level4" data-number="10.4.1.1">
<h4 data-number="10.4.1.1" class="anchored" data-anchor-id="step-1-login-to-the-aws-console"><span class="header-section-number">10.4.1.1</span> Step 1: Login to the AWS Console</h4>
<p>We’re going to start by logging into AWS.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>An AWS account is separate from an Amazon account for ordering stuff online and watching movies. If you’ve never created an account for AWS in particular, you’ll have to make an account.</p>
</div>
</div>
<p>Start by signing in at <a href="https://aws.amazon.com" class="uri">https://aws.amazon.com</a>. You most likely haven’t created an IAM account and should just login as root.</p>
<p>Once you’ve logged in, you’ll be confronted by the AWS console. There are a ton of things here – feel free to poke around if you want – come back to continue when you’re ready.</p>
</section>
<section id="step-2-stand-up-an-instance" class="level4" data-number="10.4.1.2">
<h4 data-number="10.4.1.2" class="anchored" data-anchor-id="step-2-stand-up-an-instance"><span class="header-section-number">10.4.1.2</span> Step 2: Stand up an instance</h4>
<p>AWS’s most basic “rent a server by the hour” service is called EC2 (Elastic Cloud Compute).</p>
<p>There are five things we have to configure in the process of launching the server. I’ll give you advice on each of them. If I don’t mention it here, feel free to stick with defaults.</p>
<section id="name-tags" class="level5" data-number="10.4.1.2.1">
<h5 data-number="10.4.1.2.1" class="anchored" data-anchor-id="name-tags"><span class="header-section-number">10.4.1.2.1</span> Name + Tags</h5>
<p>The first choice is instance <strong>name and tags</strong>. They aren’t required, but I’d recommend you name the server something like <code>do4ds-lab</code> so you can remember what this server is later.</p>
</section>
<section id="image" class="level5" data-number="10.4.1.2.2">
<h5 data-number="10.4.1.2.2" class="anchored" data-anchor-id="image"><span class="header-section-number">10.4.1.2.2</span> Image</h5>
<p>Next, you’ll have to choose the <strong>image</strong>. An image is a snapshot of a system and serves as the starting point for your server. Images can range from just a bare operating system to a running RStudio instance that’s paused in between two computations.</p>
<p>All clouds have the concept of images. AWS calls their’s <em>Amazon Machine Images</em> or <em>AMIs</em>. Some images are free and some are paid.</p>
<p>Since we’re going to work on configuring the server from the ground up, we’re going to choose an AMI that’s just the operating system. For the lab, let’s use Ubuntu Server LTS 22.04 image. It should say <em>free tier eligible</em>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you want to use a different operating system, that’s fine. For the purpose of being able to follow along with this lab, I’d recommend using Ubuntu 22.04.</p>
<p>If you happen to be reading this after 2026 or so, there will be newer operating systems. A newer version of Ubuntu should work very similarly for the purposes of this lab.</p>
</div>
</div>
</section>
<section id="instance-type" class="level5" data-number="10.4.1.2.3">
<h5 data-number="10.4.1.2.3" class="anchored" data-anchor-id="instance-type"><span class="header-section-number">10.4.1.2.3</span> Instance Type</h5>
<p>You’ll have to choose an <strong>Instance Type</strong>. In AWS, there are two components to instance type – the <em>family</em> and the <em>size</em>. The family is the category of server that you’re using. In AWS, families are denoted by letters and numbers, so there are T2s and T3s, C4s, R5s, and many more.</p>
<p>Within each family, there are different sizes. The sizes availble vary by the family, but generally range from <em>nano</em> to multiples of <em>xlarge</em> like <em>24xlarge</em>.</p>
<p>For now, I’d recommend you get the largest server that is free tier eligible, which is a <em>t2.micro</em> with 1 CPU and 1 Gb of memory as of this writing.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Server sizing for the lab
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <em>t2.micro</em> with 1 CPU and 1 Gb of memory is a very small server. For example, your laptop probably has at least 8 CPUs and 8 Gb of memory.</p>
<p>If all you’re doing is walking through the lab, it should be sufficient, but if you actually want to do any data science work, you’ll need a substantially larger server.</p>
<p>If you want to pick a server for actual data science work, there’s lots of advice on how to choose in <a href="3-6-servers.html">Chaper&nbsp;<span>15</span></a>.</p>
</div>
</div>
</section>
<section id="keypair" class="level5" data-number="10.4.1.2.4">
<h5 data-number="10.4.1.2.4" class="anchored" data-anchor-id="keypair"><span class="header-section-number">10.4.1.2.4</span> Keypair</h5>
<p>Next, you’ll need to make sure you have a <strong>keypair</strong>. A keypair is a special kind of SSH key that’s only valid for a particular server.</p>
<p>If you aren’t sure what that means, I’d recommend you check out <a href="../sec2/2-1-cmd-line.html">Chapter&nbsp;<span>6</span></a>.</p>
<p>Even if you have a keypair you already use, I’d suggest creating a new one and naming it <code>do4ds-lab-key</code>. Download the <code>pem</code> version of your key.</p>
<p>I’ll use that name throughout the lab, so you can just copy commands straight from this book if you use the same name.</p>
<p>I’d recommend creating a directory for this lab, perhaps something like <code>do4ds-lab</code> and putting your keypair there. If you’re not going to do that, just make sure you keep track of where you downloaded it.</p>
</section>
<section id="storage" class="level5" data-number="10.4.1.2.5">
<h5 data-number="10.4.1.2.5" class="anchored" data-anchor-id="storage"><span class="header-section-number">10.4.1.2.5</span> Storage</h5>
<p>For storage, you should bump it up to something more than 8 Gb. As of this writing, you can get 30 Gb under the free tier. I’d recommend at least 16 Gb, but feel free to go bigger if you wish.</p>
</section>
</section>
<section id="step-3-start-your-server" class="level4" data-number="10.4.1.3">
<h4 data-number="10.4.1.3" class="anchored" data-anchor-id="step-3-start-your-server"><span class="header-section-number">10.4.1.3</span> Step 3: Start your Server</h4>
<p>If you followed these instructions, the summary on the right side should look something like this:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/instance-summary.png" class="img-fluid figure-img" width="362"></p>
</figure>
</div>
<p>Click <code>Launch Instance</code>. AWS is now creating a virtual server <em>just for you</em>.</p>
<p>If you go back to the EC2 page and click on <code>Instances</code> you can see your instance as it comes up. You may need to remove the filter for <code>State: Running</code> since it’ll take a few moments to be <code>Running</code>.</p>
</section>
<section id="step-4-grab-the-address-of-your-server" class="level4" data-number="10.4.1.4">
<h4 data-number="10.4.1.4" class="anchored" data-anchor-id="step-4-grab-the-address-of-your-server"><span class="header-section-number">10.4.1.4</span> Step 4: Grab the address of your server</h4>
<p>If you click on the actual instance ID in blue, you can see all the details of your server.</p>
<p>Wait for a few moments for the instance state to transition to <code>Running</code>.</p>
<p>Once the instance is up, you’ll be able to see the instance ID and public IP addresses, which were auto-assigned.</p>
<p>Copy the Public IPv4 DNS address , which starts with <code>ec2-</code> and ends with <code>amazonaws.com</code>. That little icon on the left of the address copies it.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Set a Server Address Variable
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the rest of the labs in this book, I’m going to write the commands using the bash variable <code>SERVER_ADDRESS</code>. That means that if you create that variable, you’ll be able to just copy the commands out of the book.</p>
<p>For example, as I write this, my server has the address <code>ec2-54-159-134-39.compute-1.amazonaws.com</code>. So would set my server address variable with <code>SERVER_ADDRESS=ec2-54-159-134-39.compute-1.amazonaws.com</code>.</p>
<p>If you’re used to R or Python, where it’s best practice to put spaces around <code>=</code>, notice that assigning variables in bash <em>requires</em> no spaces around <code>=</code>.</p>
</div>
</div>
</section>
<section id="step-5-stop-the-server" class="level4" data-number="10.4.1.5">
<h4 data-number="10.4.1.5" class="anchored" data-anchor-id="step-5-stop-the-server"><span class="header-section-number">10.4.1.5</span> Step 5: Stop the Server</h4>
<p>Whenever you’re stopping for the day, you may want to suspend your server so you’re not paying for it overnight or using up your free tier hours. You can suspend an instance in the state it’s in so it can be restarted later.</p>
<p>If you’re storing a lot of data with your instance, it may not be free – but it is quite cheap. In the free tier, a suspended instance should be free for some time.</p>
<p>Whenever you want to suspend your instance, go to the EC2 page for your server. Under the <code>Instance State</code> drop down in the upper right, choose <code>Stop Instance</code>.</p>
<p>After a couple minutes the instance will stop. Before you come back to the next lab, you’ll need to start the instance back up so it’s ready to go.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you stop your server, the server address will change and you’ll have to use the new one. In <a href="3-4-dns.html">Chapter&nbsp;<span>13</span></a>, we’ll get into getting a stable IP address and URL for the server.</p>
</div>
</div>
<p>If you want to completely delete the instance at any point, you can choose to <code>Terminate Instance</code> from that same <code>Instance State</code> dropdown.</p>
</section>
</section>
<section id="step-6-put-the-penguins-data-and-model-in-s3" class="level3" data-number="10.4.2">
<h3 data-number="10.4.2" class="anchored" data-anchor-id="step-6-put-the-penguins-data-and-model-in-s3"><span class="header-section-number">10.4.2</span> Step 6: Put the penguins data and model in S3</h3>
<p>As discussed in <a href="../sec1/1-3-data-access.html">Chapter&nbsp;<span>3</span></a>, we’re going to want to put our data and our model somewhere other than on our local machine.</p>
<p>While this data doesn’t get updated, you might want to be able to update the data and the model periodically.</p>
<p>A bucket is a great place to store non-tabular data like a model. AWS’s bucket storage is called S3. You’ll probably find yourself using it a lot. It can also store flat files to be used by DuckDB.</p>
<p>For the model, <code>{vetiver}</code> interfaces with another package called <code>{pins}</code> which makes it easy to store data in a variety of backends, including an s3 bucket.</p>
<p>First, you’ll need to create an S3 bucket in the AWS console. Give it a name that’s descriptive and memorable – it will also have to be unique. I named mine <code>do4ds-lab</code>. You’ll have to choose the AWS region where your bucket is located – take note of this.</p>
<p>Now, let’s change our code to write to the S3 bucket we created. Vetiver makes this very easy. All you have to do to move the model into S3 is to change the line that creates the bucket in your code so instead of using a <code>board_temp</code>, it uses <code>board_s3</code>.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>model.qmd</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-startfrom="47"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python" style="counter-reset: source-line 46;"><span id="cb1-47"><a href="#cb1-47"></a><span class="im">from</span> vetiver <span class="im">import</span> VetiverModel</span>
<span id="cb1-48"><a href="#cb1-48"></a>v <span class="op">=</span> VetiverModel(model, model_name<span class="op">=</span><span class="st">'penguin_model'</span>, prototype_data<span class="op">=</span>X)</span>
<span id="cb1-49"><a href="#cb1-49"></a>```</span>
<span id="cb1-50"><a href="#cb1-50"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>That line will now become</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>model.qmd</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-startfrom="64"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python" style="counter-reset: source-line 63;"><span id="cb2-64"><a href="#cb2-64"></a><span class="im">from</span> vetiver <span class="im">import</span> VetiverAPI</span>
<span id="cb2-65"><a href="#cb2-65"></a>app <span class="op">=</span> VetiverAPI(v, check_prototype <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb2-66"><a href="#cb2-66"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, if you try this line in your code, it won’t work. Why? Because of authentication. The bucket we’re using isn’t public and AWS needs to know that we’re actually allowed to access it.</p>
<p>In this case, we’re going to use <a href="@sec-env-vars">environment variables</a> to give access to the S3 bucket. If you play around a little, you’ll discover that <code>{pins}</code> does authentication via the <code>s3fs</code> package, which can do authentication in several different ways. We’re going to use environment variables because they work nicely locally and from GitHub Actions.</p>
<p>The 3 environment variables are <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>, and <code>AWS_REGION</code>. You can get the access key and secret access key from the AWS console.</p>
<p>Once you’ve done that, create a file in the directory where your project is called <code>.env</code>. In that file you’ll put the access keys, along with the AWS region where you put your bucket.</p>
<p>It’ll look something like this<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.env</strong></pre>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1"></a><span class="at">AWS_ACCESS_KEY_ID=AJAASJKD88ALLKAIS8A</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="at">AWS_SECRET_ACCESS_KEY=0JAJSduasdjkASDLISjkasd8AD78</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="at">AWS_REGION=us-east-1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, add a block to the code that loads in the environment variables.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>model.qmd</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-startfrom="56"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python" style="counter-reset: source-line 55;"><span id="cb4-56"><a href="#cb4-56"></a></span>
<span id="cb4-57"><a href="#cb4-57"></a>model_board <span class="op">=</span> board_folder(<span class="st">"/data/model"</span>, allow_pickle_read <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb4-58"><a href="#cb4-58"></a>vetiver_pin_write(model_board, v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If these variables are in the environment, the call to <code>board_s3</code> should just work locally.</p>
<p>We have one more step to make this work so that the model can also be written from GitHub actions. GitHub Actions needs to know how to access those environment variables too.</p>
<p>So in the <code>Render and Publish</code> step, we’re going to declare those variables as well as environment variables.</p>
<p>Once you’re done, that section of the <code>publish.yml</code> should look something like this.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.github/workflows/publish.yml</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-start_line="45" data-end_line="49"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="at">  </span><span class="fu">workflow_dispatch</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> main</span></span>
<span id="cb5-5"><a href="#cb5-5"></a></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Quarto Publish</span></span>
<span id="cb5-7"><a href="#cb5-7"></a></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="at">  </span><span class="fu">build-deploy</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="at">    </span><span class="fu">permissions</span><span class="kw">:</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="at">      </span><span class="fu">contents</span><span class="kw">:</span><span class="at"> write</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check out repository</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v2</span></span>
<span id="cb5-16"><a href="#cb5-16"></a></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Set up Quarto</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> quarto-dev/quarto-actions/setup@v2</span></span>
<span id="cb5-19"><a href="#cb5-19"></a></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install R</span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-r@v2</span></span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="at">          </span><span class="fu">r-version</span><span class="kw">:</span><span class="at"> </span><span class="st">'4.2.0'</span></span>
<span id="cb5-24"><a href="#cb5-24"></a><span class="at">          </span><span class="fu">use-public-rspm</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb5-25"><a href="#cb5-25"></a></span>
<span id="cb5-26"><a href="#cb5-26"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup renv and install packages</span></span>
<span id="cb5-27"><a href="#cb5-27"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> r-lib/actions/setup-renv@v2</span></span>
<span id="cb5-28"><a href="#cb5-28"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-29"><a href="#cb5-29"></a><span class="at">          </span><span class="fu">cache-version</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb5-30"><a href="#cb5-30"></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb5-31"><a href="#cb5-31"></a><span class="at">          </span><span class="fu">RENV_CONFIG_REPOS_OVERRIDE</span><span class="kw">:</span><span class="at"> https://packagemanager.rstudio.com/all/latest</span></span>
<span id="cb5-32"><a href="#cb5-32"></a></span>
<span id="cb5-33"><a href="#cb5-33"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install Python and Dependencies</span></span>
<span id="cb5-34"><a href="#cb5-34"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v4</span></span>
<span id="cb5-35"><a href="#cb5-35"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-36"><a href="#cb5-36"></a><span class="at">          </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">'3.10'</span></span>
<span id="cb5-37"><a href="#cb5-37"></a><span class="at">          </span><span class="fu">cache</span><span class="kw">:</span><span class="at"> </span><span class="st">'pip'</span></span>
<span id="cb5-38"><a href="#cb5-38"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">run</span><span class="kw">:</span><span class="at"> pip install jupyter</span></span>
<span id="cb5-39"><a href="#cb5-39"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">run</span><span class="kw">:</span><span class="at"> pip install -r requirements.txt</span></span>
<span id="cb5-40"><a href="#cb5-40"></a></span>
<span id="cb5-41"><a href="#cb5-41"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Render and Publish</span></span>
<span id="cb5-42"><a href="#cb5-42"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> quarto-dev/quarto-actions/publish@v2</span></span>
<span id="cb5-43"><a href="#cb5-43"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-44"><a href="#cb5-44"></a><span class="at">          </span><span class="fu">target</span><span class="kw">:</span><span class="at"> gh-pages</span></span>
<span id="cb5-45"><a href="#cb5-45"></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb5-46"><a href="#cb5-46"></a><span class="at">          </span><span class="fu">GITHUB_TOKEN</span><span class="kw">:</span><span class="at"> ${{ secrets.GITHUB_TOKEN }}</span></span>
<span id="cb5-47"><a href="#cb5-47"></a><span class="at">          </span><span class="fu">AWS_ACCESS_KEY_ID</span><span class="kw">:</span><span class="at"> ${{ secrets.AWS_ACCESS_KEY_ID }}</span></span>
<span id="cb5-48"><a href="#cb5-48"></a><span class="at">          </span><span class="fu">AWS_SECRET_ACCESS_KEY</span><span class="kw">:</span><span class="at"> ${{ secrets.AWS_SECRET_ACCESS_KEY }}</span></span>
<span id="cb5-49"><a href="#cb5-49"></a><span class="at">          </span><span class="fu">AWS_REGION</span><span class="kw">:</span><span class="at"> us-east-1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, unlike the <code>GITHUB_TOKEN</code> secret, which GitHub Actions automatically provides to itself, we’ll have to provide these secrets to the GitHub interface.As of this writing, you can provide them under the repository settings, secrets and variables, actions.</p>
<p>The other thing you’ll need to do is to update the API to use the S3 pin. Luckily, this is very easy. Just update the script you used to build your <code>Dockerfile</code> so it pulls from the pin in the S3 bucket rather than the local folder.</p>
<p>Now, the script to build the <code>Dockerfile</code> looks like this:</p>
<div class="sourceCode" id="cb6" data-start_line="11" data-end_line="19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="op">---</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>title: <span class="st">"Prepare Dockerfile"</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="bu">format</span>:</span>
<span id="cb6-4"><a href="#cb6-4"></a>  html:</span>
<span id="cb6-5"><a href="#cb6-5"></a>    code<span class="op">-</span>fold: true</span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="op">---</span></span>
<span id="cb6-7"><a href="#cb6-7"></a></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">## Load Environment</span></span>
<span id="cb6-9"><a href="#cb6-9"></a></span>
<span id="cb6-10"><a href="#cb6-10"></a>```{python}</span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb6-12"><a href="#cb6-12"></a></span>
<span id="cb6-13"><a href="#cb6-13"></a>load_dotenv()</span>
<span id="cb6-14"><a href="#cb6-14"></a></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="im">from</span> pins <span class="im">import</span> board_s3</span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="im">from</span> vetiver <span class="im">import</span> vetiver_prepare_docker</span>
<span id="cb6-17"><a href="#cb6-17"></a></span>
<span id="cb6-18"><a href="#cb6-18"></a>board <span class="op">=</span> board_s3(<span class="st">"do4ds-lab"</span>, allow_pickle_read<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-19"><a href="#cb6-19"></a>vetiver_prepare_docker(board, <span class="st">"penguin_model"</span>)</span>
<span id="cb6-20"><a href="#cb6-20"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are a variety of ways to put the data into S3 as well. I would recommend doing this if you are going to be working with data that will update. In fact, DuckDB allows you to directly interface with parquet files on S3.</p>


</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>https://www.visualcapitalist.com/aws-powering-the-internet-and-amazons-profits/<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://a16z.com/2021/05/27/cost-of-cloud-paradox-market-cap-cloud-lifecycle-scale-growth-repatriation-optimization/<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>By temporary workloads, I mean for example the need for a very large server to run a particular machine learning model. This is <em>not</em> the autoscaling failure case, because you’re not expecting this server to turn itself on and off. Instead, you’d stand it up – run it for a few hours, days, or weeks while you’re using it, and then manually turn it off. This is super easy with a cloud server and very difficult in an on-prem world.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>There are also some wild services that do specific things, like let you rent you satellite ground station infrastructure or do Internet of Things (IoT) workloads. Those services are really cool, but so far outside the scope of this book that I’m fine with talking like they don’t exist.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>There are many others. These are just the most popular I’ve seen for data science use cases.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Not my real access key or secret access key. Never share them.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../chapters/sec3/3-0-sec-intro.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">IT/Admin for Data Science</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../chapters/sec3/3-2-linux-admin.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Basic Linux SysAdmin</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2022, Alex K Gold</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link active" href="https://github.com/akgold/do4ds" aria-current="page">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/alexkgold">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>