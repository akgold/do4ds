<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 Lab 1: Get your own server | DevOps for Data Science (working title)</title>
<meta name="author" content="Alex Gold">
<meta name="description" content="Throughout the rest of the book, we’re going to talk about how to set up a real data science workbench in the cloud. In this first lab, we’re just going to go through the simple steps of getting a...">
<meta name="generator" content="bookdown 0.24.4 with bs4_book()">
<meta property="og:title" content="Chapter 5 Lab 1: Get your own server | DevOps for Data Science (working title)">
<meta property="og:type" content="book">
<meta property="og:description" content="Throughout the rest of the book, we’re going to talk about how to set up a real data science workbench in the cloud. In this first lab, we’re just going to go through the simple steps of getting a...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 5 Lab 1: Get your own server | DevOps for Data Science (working title)">
<meta name="twitter:description" content="Throughout the rest of the book, we’re going to talk about how to set up a real data science workbench in the cloud. In this first lab, we’re just going to go through the simple steps of getting a...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap/bootstrap.bundle.min.js"></script><script src="libs/bs3compat/transition.js"></script><script src="libs/bs3compat/tabs.js"></script><script src="libs/bs3compat/bs3compat.js"></script><link href="libs/bs4_book/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book/bs4_book.js"></script><script src="libs/accessible-code-block/empty-anchor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">DevOps for Data Science (working title)</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="about-the-author.html">About the Author</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="command-line.html"><span class="header-section-number">2</span> The Command Line</a></li>
<li><a class="" href="ssh.html"><span class="header-section-number">3</span> Accessing Servers via SSH</a></li>
<li><a class="" href="computers-computing-and-servers.html"><span class="header-section-number">4</span> Computers, Computing, and Servers</a></li>
<li><a class="active" href="lab-1-get-your-own-server.html"><span class="header-section-number">5</span> Lab 1: Get your own server</a></li>
<li><a class="" href="url.html"><span class="header-section-number">6</span> Computer Networks and the Internet</a></li>
<li><a class="" href="getting-a-real-url.html"><span class="header-section-number">7</span> Getting a real URL</a></li>
<li><a class="" href="private-networking-configuration.html"><span class="header-section-number">8</span> Private Networking Configuration</a></li>
<li><a class="" href="auth.html"><span class="header-section-number">9</span> How login works</a></li>
<li><a class="" href="choosing-and-using-a-data-architecture.html"><span class="header-section-number">10</span> Choosing and Using A Data Architecture</a></li>
<li><a class="" href="environments-and-reproducibility.html"><span class="header-section-number">11</span> Environments and Reproducibility</a></li>
<li><a class="" href="the-cloud-and-cloud-providers.html"><span class="header-section-number">12</span> The Cloud and Cloud Providers</a></li>
<li><a class="" href="it-and-data-science-workflows.html"><span class="header-section-number">13</span> IT and Data Science Workflows</a></li>
<li><a class="" href="scaling.html"><span class="header-section-number">14</span> Scaling</a></li>
<li><a class="" href="docker.html"><span class="header-section-number">15</span> Docker</a></li>
<li><a class="" href="offline.html"><span class="header-section-number">16</span> Offline</a></li>
<li><a class="" href="infrastructure-as-code-tooling.html"><span class="header-section-number">17</span> Infrastructure As Code Tooling</a></li>
<li><a class="" href="things-to-add-additional-topics.html"><span class="header-section-number">18</span> Things To Add (Additional Topics)</a></li>
<li><a class="" href="determining-what-you-need.html"><span class="header-section-number">19</span> Determining What You Need</a></li>
<li><a class="" href="getting-started-with-terminal.html"><span class="header-section-number">20</span> Getting Started with Terminal</a></li>
<li><a class="" href="useful-shell-commands.html"><span class="header-section-number">21</span> Useful Shell Commands</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="more-to-say.html"><span class="header-section-number">A</span> More to Say</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="lab-1-get-your-own-server" class="section level1" lab-1="">
<h1>
<span class="header-section-number">5</span> Lab 1: Get your own server<a class="anchor" aria-label="anchor" href="#lab-1-get-your-own-server"><i class="fas fa-link"></i></a>
</h1>
<p>Throughout the rest of the book, we’re going to talk about how to set up
a real data science workbench in the cloud. In this first lab, we’re
just going to go through the simple steps of getting a free server from
AWS to use.</p>
<p>If you’ve never set up a server before, I’d strongly recommend you play
along.</p>
<p>Throughout the rest of the book, we’re going to be taking this toy
server and upgrading it in various ways. If you’re trying to work along,
you’ll probably do this a dozen times or more over the course of the
book.</p>
<p>There are a number of topics that we’re going to gloss over in this
chapter including networking and storage configuration, security, and
how SSH works. By the time you’re done with this book, you’ll be able to
come back to this chapter and fully understand everything you did.</p>
<p>You’ll also understand why this first server is ready for production
data science work in the same way throwing a tarp over a tree branch in
the forest is a house. It might be a nice place to stay for a little,
but you’re going to need something more robust longer-term.</p>
<p>For now, you can get a server of your own in 10-15 minutes if you just
follow along, which is what I recommend.</p>
<div id="login-to-the-aws-console" class="section level3">
<h3>
<span class="header-section-number">5.0.1</span> Login to the AWS Console<a class="anchor" aria-label="anchor" href="#login-to-the-aws-console"><i class="fas fa-link"></i></a>
</h3>
<p>We’re going to be standing up a server on Amazon Web Services (AWS). If
you feel comfortable, feel free to do this in any cloud provider. All
cloud providers have their own equivalents of all the things we’re about
to do in AWS.</p>
<p>We will be standing up a server in AWS’s <em>free tier</em> – so there will be
no cost involved as long as you haven’t used up all your AWS free tier
credits before now.</p>
<p>We’re going to start by logging into AWS. If you’ve done this before,
just go ahead and log in.</p>
<p>If not, go to <a href="https://aws.amazon.com" class="uri">https://aws.amazon.com</a> and click
<code>Sign In to the Console</code> .</p>
<p>If you’ve never set up an AWS account before, click
<code>Create a New AWS account</code> and follow the instructions to create an
account. Note that even if you’ve got an Amazon account for ordering
stuff online and watching movies, an AWS account is separate.</p>
<p>Once you’ve logged in, you’ll be confronted by the AWS console. There
are a ton of things here, and it’s rather overwhelming. If you feel like
you have to understand what all these things are before going ahead,
feel free to check out the chapter on The Cloud.</p>
</div>
<div id="stand-up-an-instance" class="section level3">
<h3>
<span class="header-section-number">5.0.2</span> Stand up an instance<a class="anchor" aria-label="anchor" href="#stand-up-an-instance"><i class="fas fa-link"></i></a>
</h3>
<p>Click on the <code>EC2</code> service (it’s under <code>Launch a virtual machine</code> or
<code>Compute</code> depending on where you landed). The table has all the
different quick start Amazon Machine Images (AMIs). Find and click
<code>Ubuntu Server 20.04 LTS</code> – it’ll be one of the first handful.</p>
<p>Now you’ll be seeing the instance size chooser. It should have
auto-selected a server with the label <code>Free tier eligible</code>. Just stick
with this for now.</p>
<p>Scroll down and click <code>Review and Launch</code>, and <code>Launch</code> on the next
page.</p>
<p>When you click Launch, you’ll be asked to use a key pair. Assuming you
don’t have an existing keypair, select <code>Create a new key pair</code>, name it
<code>my_test_key</code>, and click <code>Download</code>.</p>
<p>Keep track of the <code>my_test_key.pem</code> file your computer downloads, you’ll
need it again in a minute.</p>
<p>Click <code>Launch Instances</code>. AWS is now creating a virtual server <em>just for
you</em>. If you click <code>View Instances</code> in the lower right, you’ll see your
instance. When the instance state switches to <code>Running</code>, it’s up and
running!</p>
<p>Before we leave the AWS console, let’s make sure that we’ll be able to
get to it from the internet.</p>
<p>Scroll down to the Security tab. Click the blue link under
<code>Security Groups</code>, which will start with <code>sg-</code> and include
<code>launch-wizard-</code> in parentheses.</p>
<p>Click <code>Edit inbound rules</code> , then <code>Add rule</code>. Under <code>Type</code>, scroll down
and select <code>HTTP</code>, and under <code>Source Type</code>, select <code>Anywhere-IPv4</code>.
Scroll down and click <code>Save rules</code>.</p>
</div>
<div id="ssh-into-the-server" class="section level3">
<h3>
<span class="header-section-number">5.0.3</span> SSH into the server<a class="anchor" aria-label="anchor" href="#ssh-into-the-server"><i class="fas fa-link"></i></a>
</h3>
<p>The <code>.pem</code> key you downloaded is the skeleton key to your server. If you
were setting up a real server, you’d need to be extremely careful with
this key, as it allows unrestricted access to the server. For the same
reason, it’s also great for quickly monkeying around with a server.</p>
<p>Before we can use it to open the server, we’ll need to make a quick
change to the permissions on the key.</p>
<p>To take the next steps, you’ll need to at least be able to open your
computer’s terminal and copy/paste some commands below. If that’s new to
you, feel free to check out the <a href="command-line.html#command-line">chapter on using the command
line</a>.</p>
<p>If you’re on a Mac or Linux system, you’ll do the following:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="lab-1-get-your-own-server.html#cb3-1"></a>$ <span class="bu">cd</span> ~/Downloads <span class="co">#or whatever directory the key is in</span></span>
<span id="cb3-2"><a href="lab-1-get-your-own-server.html#cb3-2"></a>$ <span class="fu">chmod</span> 600 my_test_key.pem</span></code></pre></div>
<p>#TODO: Windows?</p>
<p>To access your server, click on the <code>Instance ID</code> link for your server,
and copy the <code>Public IPv4 DNS</code>, which will start with <code>ec2-</code> and end
with <code>amazonaws.com</code>.</p>
<p>In your terminal type the following</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="lab-1-get-your-own-server.html#cb4-1"></a>$ <span class="fu">ssh</span> -i my_test_key.pem ubuntu@<span class="op">&lt;</span>Public IPv4 DNS you copied<span class="op">&gt;</span></span></code></pre></div>
<p>Type <code>yes</code> when prompted, and you’re now logged in to your server!</p>
</div>
<div id="stand-up-nginx" class="section level3">
<h3>
<span class="header-section-number">5.0.4</span> Stand Up Nginx<a class="anchor" aria-label="anchor" href="#stand-up-nginx"><i class="fas fa-link"></i></a>
</h3>
<p>Before we log off and kill this server, let’s stand up
Nginx.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;I pronounce this word “engine-ex”, but there are
numerous options for pronunciation. Pick your favorite.&lt;/p&gt;"><sup>4</sup></a> Nginx is open source software that can be
used to serve websites, as well as a variety of other networking tasks.
You’ll see it again before you’re through this book.</p>
<p>Let’s get it installed with the commands below.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="lab-1-get-your-own-server.html#cb5-1"></a>$ <span class="fu">sudo</span> apt update</span>
<span id="cb5-2"><a href="lab-1-get-your-own-server.html#cb5-2"></a>$ <span class="fu">sudo</span> apt-get install nginx -y</span></code></pre></div>
<p>Go back into the AWS console to the instance page and copy the
<code>Public IPv4 DNS</code>. Paste this into your browser’s navigation bar, and
add <code>http://</code> right before. When you navigate to the page, you’ll see
the default Nginx home page.</p>
<p>Let’s make a quick change to the page, just for fun.</p>
<p>Back in your terminal that’s still <code>SSH</code>-ed into the instance, navigate
to where that page is located:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="lab-1-get-your-own-server.html#cb6-1"></a>$ <span class="bu">cd</span> /var/www/html</span></code></pre></div>
<p>You can edit the page by typing</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="lab-1-get-your-own-server.html#cb7-1"></a>$ <span class="fu">sudo</span> vi index.nginx-debian.html</span></code></pre></div>
<p>If you don’t recall how to use <code>vi</code>, check out the <a href="">command line</a>
tutorial, but for now, you can enter edit mode by pressing <code>i</code>,
navigating around with the arrow keys, and typing.</p>
<p>Edit something – say change this line</p>
<pre><code>&lt;h1&gt;Welcome to nginx!&lt;/h1 &gt;</code></pre>
<p>to something a little more personalized.</p>
<p>When you’re done, hit <code>esc</code> followed by <code>:wq</code>.</p>
<p>Now, when you re-load the page in your browser, you should be able to
see your changes reflected there.</p>
<p>#TODO: consider using a container to get shiny server up quickly.</p>
</div>
<div id="burn-it-all-down" class="section level3">
<h3>
<span class="header-section-number">5.0.5</span> Burn it all down<a class="anchor" aria-label="anchor" href="#burn-it-all-down"><i class="fas fa-link"></i></a>
</h3>
<p>One of the best things about cloud infrastructure is that it can go away
as easily as it came up. We made a number of choices here that are fine
for ephemeral infrastructure for playing around. But this server should
not be used for anything real.</p>
<p>When you’ve had your fill of playing, let’s take the server down.</p>
<p>Go back to the EC2 page for your server. Under the <code>Instance State</code> drop
down in the upper right, choose <code>Terminate Instance</code>. If you go to the
<code>Instances</code> page, it’ll take just a minute for the instance to go away.</p>
</div>
<div id="exercises-2" class="section level2">
<h2>
<span class="header-section-number">5.1</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-2"><i class="fas fa-link"></i></a>
</h2>
<p>Try standing up a new server and installing R and RStudio Server Open
Source, or Python and JupyterHub.</p>
<ul>
<li><p>Hint 1: Remember that your instance only allows traffic to SSH in on
port <code>22</code> by default. You access RStudio on port <code>8787</code> by default
and JupyterHub on port <code>8000</code>. You control what ports are open via
the Security Group.</p></li>
<li><p>Hint 2: You’ll need to create a user on the server. The <code>adduser</code>
command is your friend.</p></li>
</ul>
<p>#TODO: test out JupyterHub</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="computers-computing-and-servers.html"><span class="header-section-number">4</span> Computers, Computing, and Servers</a></div>
<div class="next"><a href="url.html"><span class="header-section-number">6</span> Computer Networks and the Internet</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li>
<a class="nav-link" href="#lab-1-get-your-own-server"><span class="header-section-number">5</span> Lab 1: Get your own server</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#login-to-the-aws-console"><span class="header-section-number">5.0.1</span> Login to the AWS Console</a></li>
<li><a class="nav-link" href="#stand-up-an-instance"><span class="header-section-number">5.0.2</span> Stand up an instance</a></li>
<li><a class="nav-link" href="#ssh-into-the-server"><span class="header-section-number">5.0.3</span> SSH into the server</a></li>
<li><a class="nav-link" href="#stand-up-nginx"><span class="header-section-number">5.0.4</span> Stand Up Nginx</a></li>
<li><a class="nav-link" href="#burn-it-all-down"><span class="header-section-number">5.0.5</span> Burn it all down</a></li>
</ul>
</li>
<li><a class="nav-link" href="#exercises-2"><span class="header-section-number">5.1</span> Exercises</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>DevOps for Data Science (working title)</strong>" was written by Alex Gold. It was last built on 2021-12-27.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
