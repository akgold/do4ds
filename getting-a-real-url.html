<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 Getting a real URL | DevOps for Data Science (working title)</title>
<meta name="author" content="Alex Gold">
<meta name="description" content="Now that you understand what IP addresses and URLs are and how they work, we can get into how you get and use a URL for a site of your own. This is where the domain name system (DNS) comes in. DNS...">
<meta name="generator" content="bookdown 0.24.4 with bs4_book()">
<meta property="og:title" content="Chapter 7 Getting a real URL | DevOps for Data Science (working title)">
<meta property="og:type" content="book">
<meta property="og:description" content="Now that you understand what IP addresses and URLs are and how they work, we can get into how you get and use a URL for a site of your own. This is where the domain name system (DNS) comes in. DNS...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 Getting a real URL | DevOps for Data Science (working title)">
<meta name="twitter:description" content="Now that you understand what IP addresses and URLs are and how they work, we can get into how you get and use a URL for a site of your own. This is where the domain name system (DNS) comes in. DNS...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap/bootstrap.bundle.min.js"></script><script src="libs/bs3compat/transition.js"></script><script src="libs/bs3compat/tabs.js"></script><script src="libs/bs3compat/bs3compat.js"></script><link href="libs/bs4_book/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book/bs4_book.js"></script><script src="libs/accessible-code-block/empty-anchor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">DevOps for Data Science (working title)</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="about-the-author.html">About the Author</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="command-line.html"><span class="header-section-number">2</span> The Command Line</a></li>
<li><a class="" href="ssh.html"><span class="header-section-number">3</span> Accessing Servers via SSH</a></li>
<li><a class="" href="computers-computing-and-servers.html"><span class="header-section-number">4</span> Computers, Computing, and Servers</a></li>
<li><a class="" href="lab-1-get-your-own-server.html"><span class="header-section-number">5</span> Lab 1: Get your own server</a></li>
<li><a class="" href="url.html"><span class="header-section-number">6</span> Computer Networks and the Internet</a></li>
<li><a class="active" href="getting-a-real-url.html"><span class="header-section-number">7</span> Getting a real URL</a></li>
<li><a class="" href="private-networking-configuration.html"><span class="header-section-number">8</span> Private Networking Configuration</a></li>
<li><a class="" href="auth.html"><span class="header-section-number">9</span> How login works</a></li>
<li><a class="" href="choosing-and-using-a-data-architecture.html"><span class="header-section-number">10</span> Choosing and Using A Data Architecture</a></li>
<li><a class="" href="environments-and-reproducibility.html"><span class="header-section-number">11</span> Environments and Reproducibility</a></li>
<li><a class="" href="the-cloud-and-cloud-providers.html"><span class="header-section-number">12</span> The Cloud and Cloud Providers</a></li>
<li><a class="" href="it-and-data-science-workflows.html"><span class="header-section-number">13</span> IT and Data Science Workflows</a></li>
<li><a class="" href="scaling.html"><span class="header-section-number">14</span> Scaling</a></li>
<li><a class="" href="docker.html"><span class="header-section-number">15</span> Docker</a></li>
<li><a class="" href="offline.html"><span class="header-section-number">16</span> Offline</a></li>
<li><a class="" href="infrastructure-as-code-tooling.html"><span class="header-section-number">17</span> Infrastructure As Code Tooling</a></li>
<li><a class="" href="things-to-add-additional-topics.html"><span class="header-section-number">18</span> Things To Add (Additional Topics)</a></li>
<li><a class="" href="determining-what-you-need.html"><span class="header-section-number">19</span> Determining What You Need</a></li>
<li><a class="" href="getting-started-with-terminal.html"><span class="header-section-number">20</span> Getting Started with Terminal</a></li>
<li><a class="" href="useful-shell-commands.html"><span class="header-section-number">21</span> Useful Shell Commands</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="more-to-say.html"><span class="header-section-number">A</span> More to Say</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="getting-a-real-url" class="section level1">
<h1>
<span class="header-section-number">7</span> Getting a real URL<a class="anchor" aria-label="anchor" href="#getting-a-real-url"><i class="fas fa-link"></i></a>
</h1>
<p>Now that you understand what IP addresses and URLs are and how they work, we can get into how you get and use a URL for a site of your own.</p>
<p>This is where the <strong>domain name system (DNS)</strong> comes in. DNS is the decentralized internet phonebook that translates back and forth between URLs and IP addresses. There are many layers of DNS servers, so pointing your browser at <code>example.com</code> starts with a query to a DNS server asking, “Where is the DNS server for <code>.com</code> websites?”</p>
<p>Eventually, a query for your website will lead to the DNS server of your domain name registrar. You’ll have to configure your domain name registrar to send traffic on to the right place.</p>
<p>/todo: dig google.com and go straught to the IP</p>
<div id="getting-a-domain" class="section level3">
<h3>
<span class="header-section-number">7.0.1</span> Getting a Domain<a class="anchor" aria-label="anchor" href="#getting-a-domain"><i class="fas fa-link"></i></a>
</h3>
<p>The first step to getting a real URL is buying a domain from a <em>domain name registrar</em>. There are many different registrars that will sell you domain names on the internet. In general, the process of buying one is super easy. Usually, you’ll just need to search for the domain you want, say you want it, and pull out a credit card.</p>
<p>The cost of a domain name varies widely. Buying a meaningless domain in a less popular top-level domain, say <code>ladskfmlsdf.me</code> can cost as little as $3 per year. On the other hand, buying a <code>.com</code> domain that’s a real word or phrase can be a few thousand dollars.</p>
<p>Once you’ve got an IP address and a domain, you’ve got to connect the two.</p>
<p>Configuration of DNS is done by way of <em>records</em>, of which there are a menagerie of types you <em>can</em> configure. Luckily, most simple configurations only need <em>CNAME</em> and <em>A</em> records.</p>
<p>Here’s an imaginary DNS record table for the domain <code>example.com</code>:</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Path/Host</th>
<th>Type</th>
<th>Target</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>@</code></td>
<td>A</td>
<td><code>143.122.8.32</code></td>
</tr>
<tr class="even">
<td><code>www</code></td>
<td>CNAME</td>
<td>example.com</td>
</tr>
<tr class="odd">
<td><code>*</code></td>
<td>A</td>
<td><code>143.122.8.33</code></td>
</tr>
</tbody>
</table></div>
<p>Let’s go through how to read this table.</p>
<p>Since we’re configuring <code>example.com</code>, the paths/hosts in this table are relative to <code>example.com</code>.</p>
<p>In the first row we’re configuring an A record to go to the target IP address. <em>A records</em> (or their IPv6 cousin <em>AAAA records</em>) map a domain to an actual IP address. The path <code>@</code> is a special symbol meaning exact match. So by this configuration, any traffic to <code>example.com</code> will be passed straight through to the specified IP address.</p>
<p>The second row deals with traffic to the <code>www</code> subdomain. <em>CNAME records</em> alias sub-domains. They’re most frequently used to map sub-domains to the main domain. Since this is a <code>CNAME</code> record for example.com, this record indicates that traffic to www.example.com should be treated exactly like traffic to <code>example.com</code>. Some domain providers do automatic redirection of <code>www</code> traffic, and so this row may not be necessary in some configurations.</p>
<p>The last record uses the wildcard symbol <code>*</code> to send all subdomain traffic that’s not already spoken for – say <code>blog.example.com</code> or <code>info.example.com</code> directly to the IP address specified.</p>
<p>So what happens is that your query goes through several layers of public DNS servers to get to the DNS entry for your domain name registrar. In many cases, you’ll directly configure your domain name registrar to point to your website or server – but you also can configure the domain name registrar to point at another set of DNS servers you actually control with an <em>NS record</em>.</p>
<p>If you’re setting up your own server, this probably isn’t the case, but some large enterprises do run their own private DNS servers.</p>
<aside><p>You should always configure your domain provider as narrowly as possible – and you should configure your website or server <em>first</em>.</p>
<p>#TODO: why?</p>
</aside>
</div>
<div id="learning-to-hate-dns" class="section level3">
<h3>
<span class="header-section-number">7.0.2</span> Learning to Hate DNS<a class="anchor" aria-label="anchor" href="#learning-to-hate-dns"><i class="fas fa-link"></i></a>
</h3>
<p>As you get deeper into using servers, you will learn to hate DNS with a fiery passion. While it’s necessary so we’re not running around trying to remember incomprehensible IP addresses, it’s also very hard to debug as a server admin.</p>
<p>Let’s say I’ve got the public domain <code>example.com</code>, and I’m taking down the server and putting up a new one. I’ve got to alter the public DNS record so that everyone going to <code>example.com</code> gets routed to the new IP address, and not the old one.</p>
<p>The thing that makes it particularly challenging is that the DNS system is decentralized. There are thousands of public DNS servers that a request could get routed to, and many of them may need updating.</p>
<p>Obviously, this is a difficult problem to solve, and it can take up to 24 hours for DNS changes to propagate across the network. So making changes to DNS records and checking if they’ve worked is kinda a guessing game of whether enough time has passed that you can conclude that your change didn’t work right, or if you should just wait longer.</p>
<p>To add an additional layer of complexity, DNS lookups are slow, so your browser caches the results of DNS lookups it has done before. That means that it’s possible you’ll still get an old website even once the public DNS record has been updated. If a website has ever not worked for you and then worked when you tried a private browser, DNS caching is likely the culprit. Using a private browsing window sidesteps your main DNS cache and forces lookups to happen afresh.</p>
</div>
<div id="trying-it-out" class="section level3">
<h3>
<span class="header-section-number">7.0.3</span> Trying it out<a class="anchor" aria-label="anchor" href="#trying-it-out"><i class="fas fa-link"></i></a>
</h3>
<p>Go through hosting this book somewhere.</p>
</div>
<div id="exercises-4" class="section level2">
<h2>
<span class="header-section-number">7.1</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-4"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Find a cheap domain you like and buy it.</p></li>
<li><p>Put an EC2 server back up with the Nginx <code>hello-world</code> example.</p></li>
<li>
<p>Configure your server to be available at your new domain.</p>
<ol style="list-style-type: decimal">
<li>Hint: In AWS, Route 53 is the service that handles incoming networking. They can serve as a domain name registrar, or you can buy a domain elsewhere and just configure the DNS using Route 53.</li>
</ol>
</li>
</ol>
</div>
<div id="securing-traffic-with-https" class="section level2">
<h2>
<span class="header-section-number">7.2</span> Securing Traffic with <code>https</code><a class="anchor" aria-label="anchor" href="#securing-traffic-with-https"><i class="fas fa-link"></i></a>
</h2>
<p>When you go to a website on the internet, you’ll see the URL prefixed by the <code>https</code> (though it’s sometimes hidden by your browser because it’s assumed). <code>https</code> is actually a mashup that is short for <code>http</code> with secure sockets layer (SSL).</p>
<p>These days, almost everyone actually uses the successor to SSL, transport layer security (TLS). However, because the experience of configuring TLS is identical to SSL, admins usually just talk about configuring SSL even when they mean TLS.</p>
<p>These days, almost every bit of internet traffic is actually <code>https</code> traffic. You will occasionally see <code>http</code> traffic inside private networks where encryption might not be as important – but more and more organizations are requiring end-to-end use of SSL.</p>
<p>Securing your website or server using SSL/TLS is one of the most basic things you can do to make sure your website traffic is safe. You should always configure <code>https</code> – full stop.</p>
<p>SSL/TLS security is accomplished by configuring your site or server to use a SSL certificate (often abbreviated to cert). We’ll go through the details of how to get and configure an SSL certificate in this chapter – but first a little background on how SSL/TLS works.</p>
<div id="how-ssltls-enhances-security" class="section level3">
<h3>
<span class="header-section-number">7.2.1</span> How SSL/TLS Enhances Security<a class="anchor" aria-label="anchor" href="#how-ssltls-enhances-security"><i class="fas fa-link"></i></a>
</h3>
<p>SSL accomplishes two things for you – identity validation and traffic encryption.</p>
<p>When you go to a website, SSL/TLS is the technology that verifies that you’re actually reaching the website you think you’re reaching. This prevents something called a man-in-the-middle attack where a malicious actor manages to get in between the server and the client of network traffic. So, for example, you might think you’re putting your bank login information into your normal bank website, but there’s a hacker sitting in the middle, reading all of the traffic back and forth.</p>
<p><span class="math display">\[TODO: Image of man-in-the-middle\]</span></p>
<p>You can see this in action in your web browser. When you go to a website protected by <code>https</code>, you’ll see a little lock icon to the left of the URL. That means that this website’s SSL certificate matches the website and therefore your computer can verify you’re actually at the website you mean to be at.</p>
<p>But how does your computer know what a valid SSL certificate is? Your computer has a list of trusted Certificate Authorities (CAs) who create, sell, and validate SSL/TLS certificates. So when you navigate to a website, the website sends back a digital signature. Your computer checks the signature against the indicated CA to verify that it was issued to the site in question.</p>
<p><span class="math display">\[TODO: image of SSL validation\]</span></p>
<p>The second type of scary scenario SSL prevents is a snooping/sniffing attack. Even if you’re getting to the right place, your traffic travels through many different channels along the way – routers, network switches, and more. This means that someone could theoretically look at all your traffic along the way to its meaningful destination.</p>
<p>When your computer gets back the digital signature to verify the site’s identity, it also prompts an exchange of encryption keys. These keys are used to encrypt traffic back and forth between you and the server so anyone snooping on your message will just see garbled nonsense and not your actual content. You can think of the SSL/TLS encryption as the equivalent of writing a message on a note inside an envelope, rather than on a postcard anyone could read along the way.</p>
</div>
<div id="getting-a-cert-of-your-own" class="section level3">
<h3>
<span class="header-section-number">7.2.2</span> Getting a cert of your own<a class="anchor" aria-label="anchor" href="#getting-a-cert-of-your-own"><i class="fas fa-link"></i></a>
</h3>
<p>In order to configure your site or server with SSL, there are three steps you’ll want to take: getting an SSL certificate, putting the certificate on the server, and making sure the server <em>only</em> accepts <code>https</code> traffic.</p>
<p>You can either buy an SSL certificate or make one yourself, using what’s called a <em>self-signed cert</em>.</p>
<p>There are a variety of places you can buy an SSL/TLS certificate, in many cases, your domain name registrar can issue you one when you buy your domain.</p>
<p>When you create or buy your cert, you’ll have to choose the scope. A basic SSL certificate covers just the domain itself, formally known as a fully qualified domain name (FQDN). So if you get a basic SSL certificate for <code>www.example.com</code>, <code>www.blog.example.com</code> will not be covered. You can get a <em>wildcard certificate</em> that would cover every subdomain of <code>*.example.com</code>.</p>
<aside><p>Note that basic SSL/TLS certification only validates that when you type <code>example.com</code> in your browser, that you’ve gotten the real <code>example.com</code>. It doesn’t in any way validate who owns <code>example.com</code>, whether they’re reputable, or whether you should trust them.</p>
<p>There are higher levels of SSL certification that do validate that, for example, the company that owns <code>google.com</code> is actually the company Google.</p>
</aside><p>But sometimes it’s not feasible to buy certificates. While a basic SSL certificate for a single domain can cost $10 per year or less, wildcard certificates will all the bells and whistles can cost thousands per year. This can get particularly expensive if you’ve got a lot of domains for some reason.</p>
<p>Moreover, there are times when you <em>can’t</em> buy a certificate. If you’re encrypting traffic inside a private network, you will need certificates for hosts or IP addresses that are only valid inside the private network, so there’s no public CA to validate them.</p>
<p>There are two potential avenues to follow. In some cases, like inside a private network, you want SSL/TLS for the encryption, but don’t really care about the identity validation part. In this case, it’s usually possible to skip that identity validation part and automatically trust the certificate for encryption purposes.</p>
<p>It’s also possible to create your own private CA, which would verify all your SSL certificates. This is pretty common in large organizations. At some point, every server and laptop needs to have the private CA added to its set of trusted certificate validators.</p>
<p>A warning: it is deceptively easy to generate and configure a self-signed SSL certificate. It’s usually just a few lines of shell commands to create a certificate, and adding the certificate to your server or website is usually just a copy/paste affair.</p>
<p>However, it’s pretty common to run into problems with self-signed certs or private CAs. Making sure the certificate chain is correct, or running into a piece of software that doesn’t ignore the identity validation piece right is pretty common. This shouldn’t dissuade you from using SSL/TLS. It’s an essential, and basic, component of any security plan – but using a self-signed cert probably isn’t as easy as it seems.</p>
<p>When you configure your site or server, there will likely be an option to redirect all <code>http</code> traffic to <code>https</code> traffic. If your server or site is open to the internet, you should set this option.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="url.html"><span class="header-section-number">6</span> Computer Networks and the Internet</a></div>
<div class="next"><a href="private-networking-configuration.html"><span class="header-section-number">8</span> Private Networking Configuration</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li>
<a class="nav-link" href="#getting-a-real-url"><span class="header-section-number">7</span> Getting a real URL</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#getting-a-domain"><span class="header-section-number">7.0.1</span> Getting a Domain</a></li>
<li><a class="nav-link" href="#learning-to-hate-dns"><span class="header-section-number">7.0.2</span> Learning to Hate DNS</a></li>
<li><a class="nav-link" href="#trying-it-out"><span class="header-section-number">7.0.3</span> Trying it out</a></li>
</ul>
</li>
<li><a class="nav-link" href="#exercises-4"><span class="header-section-number">7.1</span> Exercises</a></li>
<li>
<a class="nav-link" href="#securing-traffic-with-https"><span class="header-section-number">7.2</span> Securing Traffic with https</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#how-ssltls-enhances-security"><span class="header-section-number">7.2.1</span> How SSL/TLS Enhances Security</a></li>
<li><a class="nav-link" href="#getting-a-cert-of-your-own"><span class="header-section-number">7.2.2</span> Getting a cert of your own</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>DevOps for Data Science (working title)</strong>" was written by Alex Gold. It was last built on 2021-12-27.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
